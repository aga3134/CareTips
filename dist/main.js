!function(t){var e={};function s(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(i,a,function(e){return t[e]}.bind(null,a));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/dist",s(s.s=16)}([function(t,e){var s={NumberWithCommas:function(t){return t?t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):""},StrCodeToInt:function(t){if(!t)return 0;for(var e=0,s=0;s<t.length;s++)e+=t.charCodeAt(s);return e},ColorCategory:function(t,e,s){e||(e=.7),s||(s=.6);for(var i=360/t,a=[],n=0;n<t;n++)a.push(d3.hsl(n*i,s,e));return function(t){return a[t].toString()}},GetUrlParameter:function(){for(var t=window.location.search.substring(1).split("&"),e={},s=0;s<t.length;s++){var i=t[s].split("=");e[i[0]]=i[1]}return e},GoToAnchor:function(t,e,s){e||(e=-80);var i=$('[name="'+t+'"]');return 0==i.length&&(i=$('a[id="'+t+'"]')),!(i.length>0)||($("html").animate({scrollTop:i.offset().top+e},500,s),!1)},SetupAnchorScroll:function(t){$("a").click((function(){var e=$.attr(this,"href");if(e){$("html").scrollTop();var i=e.indexOf("#");return s.GoToAnchor(e.substr(i+1),t)}return!1}))}};t.exports=s},function(t,e,s){},function(t,e,s){},function(t,e,s){},function(t,e,s){},function(t,e,s){},function(t,e,s){},function(t,e,s){},function(t,e,s){},function(t,e,s){},function(t,e,s){},function(t,e,s){},function(t,e,s){},function(t,e,s){},function(t,e,s){},function(t,e,s){},function(t,e,s){s(33),t.exports=s(32)},function(t,e,s){"use strict";var i=s(1);s.n(i).a},function(t,e,s){"use strict";var i=s(2);s.n(i).a},function(t,e,s){"use strict";var i=s(3);s.n(i).a},function(t,e,s){"use strict";var i=s(4);s.n(i).a},function(t,e,s){"use strict";var i=s(5);s.n(i).a},function(t,e,s){"use strict";var i=s(6);s.n(i).a},function(t,e,s){"use strict";var i=s(7);s.n(i).a},function(t,e,s){"use strict";var i=s(8);s.n(i).a},function(t,e,s){"use strict";var i=s(9);s.n(i).a},function(t,e,s){"use strict";var i=s(10);s.n(i).a},function(t,e,s){"use strict";var i=s(11);s.n(i).a},function(t,e,s){"use strict";var i=s(12);s.n(i).a},function(t,e,s){"use strict";var i=s(13);s.n(i).a},function(t,e,s){"use strict";var i=s(14);s.n(i).a},function(t,e,s){"use strict";var i=s(15);s.n(i).a},function(t,e,s){},function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main"},[s("div",{on:{click:function(e){t.openSearchPanel=!1}}},[s("div",{staticClass:"bt-bar"},[s("div",{staticClass:"action-bt",on:{click:function(e){e.stopPropagation(),t.openSearchPanel=!0}}},[t._v("搜尋案例")]),t._v(" "),s("div",{staticClass:"action-bt",on:{click:function(e){return t.GoToLink("/case/create")}}},[t._v("新增案例")]),t._v(" "),s("div",{staticClass:"action-bt",on:{click:function(e){return t.GoToLink("/case/random")}}},[t._v("隨機解題")])]),t._v(" "),t._m(0),t._v(" "),s("div",[s("case-list",{ref:"caseList",attrs:{init:"1"}}),t._v(" "),s("div",{staticClass:"category-separator"}),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8)],1)]),t._v(" "),s("div",{staticClass:"tab-bar"},[s("div",{staticClass:"tab-bt-container"},[s("div",{staticClass:"tab-bt",on:{click:function(e){e.stopPropagation(),t.openSearchPanel=!0}}},[t._v("搜尋案例")]),t._v(" "),s("div",{staticClass:"tab-bt",on:{click:function(e){return t.GoToLink("/case/create")}}},[t._v("新增案例")]),t._v(" "),s("div",{staticClass:"tab-bt",on:{click:function(e){return t.GoToLink("/case/random")}}},[t._v("隨機解題")])])]),t._v(" "),s("div",{staticClass:"side-panel",class:{open:t.openSearchPanel}},[t._m(9),t._v(" "),s("div",{staticClass:"search-container"},[s("div",{staticClass:"search-item"},[s("div",{staticClass:"search-label"},[t._v("排序")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.selectSort,expression:"selectSort"}],on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selectSort=e.target.multiple?s:s[0]},function(e){return t.SearchCase()}]}},[s("option",{attrs:{value:"newest"}},[t._v("由新到舊")]),t._v(" "),s("option",{attrs:{value:"oldest"}},[t._v("由舊到新")]),t._v(" "),s("option",{attrs:{value:"solNum"}},[t._v("最多解方")]),t._v(" "),s("option",{attrs:{value:"likeNum"}},[t._v("最多讚")]),t._v(" "),s("option",{attrs:{value:"viewNum"}},[t._v("最多觀看")])])]),t._v(" "),s("div",{staticClass:"search-item"},[s("div",{staticClass:"search-label canNotEmpty"},[t._v("分享者專業")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.selectProfession,expression:"selectProfession"}],on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selectProfession=e.target.multiple?s:s[0]},function(e){return t.SearchCase()}]}},[s("option",{attrs:{value:"全部"}},[t._v("全部")]),t._v(" "),t._l(t.professions,(function(e){return s("option",{domProps:{value:e}},[t._v(t._s(e))])}))],2)]),t._v(" "),s("div",{staticClass:"search-item"},[s("div",{staticClass:"search-label"},[t._v("關鍵字")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],attrs:{type:"text",placeholder:"請輸入搜尋關鍵字"},domProps:{value:t.keyword},on:{change:function(e){return t.SearchCase()},keyup:function(e){return e.type.indexOf("key")||13===e.keyCode?t.SearchCase():null},input:function(e){e.target.composing||(t.keyword=e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"input-bt",on:{click:function(e){t.openSearchPanel=!1}}},[t._v("確定")]),t._v(" "),s("div",{staticClass:"input-bt",on:{click:function(e){return t.ResetCondition()}}},[t._v("重設")])])])};i._withStripped=!0;var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{directives:[{name:"show",rawName:"v-show",value:0==t.caseList.length,expression:"caseList.length==0"}],staticClass:"no-result-box"},[t._v("\r\n\t\t目前暫無符合條件的案例\r\n\t\t"),0==t.emptyAction?s("div",{staticClass:"center-bt"},[t._v("查無資料")]):s("div",{staticClass:"center-bt",on:{click:function(e){return t.CreateCase()}}},[t._v("新增案例")])]),t._v(" "),s("div",{staticClass:"case-list"},[s("transition-group",{staticStyle:{width:"100%"},attrs:{name:"create"}},t._l(t.caseList,(function(e,i){return s("div",{key:e.id,staticClass:"list-item one-third-w shadow-light"},[s("a",{attrs:{href:"/case?case="+e.id}},[s("div",{staticClass:"owner-info",style:{"background-color":e.user.headColor}},[s("img",{staticClass:"owner-icon",attrs:{src:e.user.icon}}),t._v("\r\n\t\t\t\t\t\t"+t._s(e.user.profession)+" - "+t._s(e.user.name)+"\r\n\t\t\t\t\t")]),t._v(" "),s("div",{staticClass:"domain-statistic"},[s("div",{staticClass:"domain-info"},[s("div",{staticClass:"domain-icon cat-D1"}),t._v(" "),s("div",{staticClass:"tip cat-D1"},[t._v("環境問題 "+t._s(e.D1Num)+" 項")]),t._v(" "),s("div",{staticClass:"domain-num"},[t._v(t._s(e.D1Num))])]),t._v(" "),s("div",{staticClass:"domain-info"},[s("div",{staticClass:"domain-icon cat-D2"}),t._v(" "),s("div",{staticClass:"tip cat-D2"},[t._v("心理問題 "+t._s(e.D2Num)+" 項")]),t._v(" "),s("div",{staticClass:"domain-num"},[t._v(t._s(e.D2Num))])]),t._v(" "),s("div",{staticClass:"domain-info"},[s("div",{staticClass:"domain-icon cat-D3"}),t._v(" "),s("div",{staticClass:"tip cat-D3"},[t._v("生理問題 "+t._s(e.D3Num)+" 項")]),t._v(" "),s("div",{staticClass:"domain-num"},[t._v(t._s(e.D3Num))])]),t._v(" "),s("div",{staticClass:"domain-info"},[s("div",{staticClass:"domain-icon cat-D4"}),t._v(" "),s("div",{staticClass:"tip cat-D4"},[t._v("行為問題 "+t._s(e.D4Num)+" 項")]),t._v(" "),s("div",{staticClass:"domain-num"},[t._v(t._s(e.D4Num))])])]),t._v(" "),s("div",{staticClass:"desc"},[t._v(t._s(e.desc))]),t._v(" "),s("div",{staticClass:"feedback-statistic"},[s("img",{staticClass:"feedback-icon",attrs:{src:"/static/image/like.png"}}),t._v(" "),s("div",{staticClass:"feedback-num"},[t._v(t._s(e.likeNum))]),t._v("\r\n\t\t\t\t\t\t觀看次數"),s("div",{staticClass:"feedback-num"},[t._v(t._s(e.viewNum))])])])])})),0)],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0==t.noMore,expression:"noMore==false"}],staticClass:"load-more",on:{click:function(e){return t.LoadMoreList()}}},[t._v("更多案例 ▼")])])};a._withStripped=!0;var n=s(0),o={props:["init","emptyAction"],data:function(){return{caseList:[],preLoad:[],page:0,param:{},noMore:!1}},created:function(){"1"==this.init&&this.LoadMoreList()},methods:{InitHeadColor:function(){for(var t=n.ColorCategory(30,.9),e=0;e<this.caseList.length;e++){var s=this.caseList[e].user.profession,i=n.StrCodeToInt(s)%30;this.caseList[e].user.headColor=t(i)}},SetParam:function(t){this.param=t},ClearList:function(){this.page=0,this.caseList=[],this.preLoad=[],this.noMore=!1},PreLoadList:function(t){if(this.param){var e="/case/list?page="+this.page;this.param.ownerID&&(e+="&owner="+this.param.ownerID),this.param.keyword&&(e+="&keyword="+this.param.keyword),this.param.profession&&(e+="&profession="+this.param.profession),e+="&sort="+(this.param.sort||"newest"),$.get(e,function(e){return this.preLoad=e.data,"ok"!=e.status?alert("讀取案例列表失敗"):0==this.preLoad.length?this.noMore=!0:(this.page++,void(t&&t()))}.bind(this))}},LoadMoreList:function(t){if(t&&(this.param=t),0==this.preLoad.length)return this.PreLoadList(this.LoadMoreList);this.caseList.push.apply(this.caseList,this.preLoad),this.PreLoadList(),this.InitHeadColor()},CreateCase:function(){window.location.href="/case/create"}}};s(17);function r(t,e,s,i,a,n,o,r){var c,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=s,l._compiled=!0),i&&(l.functional=!0),n&&(l._scopeId="data-v-"+n),o?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},l._ssrRegister=c):a&&(c=r?function(){a.call(this,this.$root.$options.shadowRoot)}:a),c)if(l.functional){l._injectStyles=c;var v=l.render;l.render=function(t,e){return c.call(e),v(t,e)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,c):[c]}return{exports:t,options:l}}var c=r(o,a,[],!1,null,null,null);c.options.__file="src/vue/case-list.vue";var l=c.exports,v=(s(0),{data:function(){return{openSearchPanel:!1,selectProfession:"全部",selectSort:"newest",keyword:""}},components:{"case-list":l},created:function(){$.get("/static/solution.json",function(t){this.professions=t.profession}.bind(this))},methods:{SearchCase:function(){var t={};""!=this.keyword&&(t.keyword=this.keyword),"全部"!=this.selectProfession&&(t.profession=this.selectProfession),t.sort=this.selectSort,this.$refs.caseList.ClearList(),this.$refs.caseList.LoadMoreList(t)},ResetCondition:function(){this.keyword="",this.selectSort="newest",this.selectProfession="全部",this.SearchCase()},GoToLink:function(t){window.location.href=t}}}),u=(s(18),r(v,i,[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"category-title"},[this._v("\r\n\t\t\t案例列表\r\n\t\t\t"),e("div",{staticClass:"bottom-line"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mid-title"},[this._v("\r\n\t\t\t\t關於本站\r\n\t\t\t\t"),e("div",{staticClass:"bottom-line"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"about"},[s("p",[t._v("謹以此專案感謝每一位長期忍受制度中的無奈，為無助家庭默默提供溫暖協助的照護服務者。照服，亦是在造福。願在造福路上，本站可以伴著大家，為大家提供一絲絲幫助。")]),t._v(" "),s("p",[t._v("本站是參與「"),s("a",{attrs:{href:"https://unihub.hfcc.com.tw/hackathon/2018-1/",target:"_blank"}},[t._v("博祖克實驗 資訊系統議題松")]),t._v("」後發展出的專案，目的在為照護服務者提供"),s("span",{staticClass:"enhance"},[t._v("跨專業的對話與交流")]),t._v("，藉由各路專家開放自己的知識與經驗，"),s("span",{staticClass:"enhance"},[t._v("累積照護情境案例與解決方案")]),t._v("，讓新手夥伴能有一個快速成長的練功房。")]),t._v(" "),s("p",[t._v("正如"),s("a",{attrs:{href:"https://www.facebook.com/groups/115650035793555/",target:"_blank"}},[t._v("HCOS")]),t._v("哈爸所說，開放系統為使用者省下一分鐘，全台灣就會省下2300萬分鐘；您所分享出來的經驗與專業為使用者增加一分功力，全台灣就會一起增加2300萬分功力。一起為台灣建構更加美好的高齡生活吧~")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mid-title"},[this._v("\r\n\t\t\t\t挖坑夥伴\r\n\t\t\t\t"),e("div",{staticClass:"bottom-line"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"logo-container"},[e("a",{attrs:{href:"https://www.facebook.com/groups/115650035793555/",target:"_blank"}},[e("img",{staticClass:"logo-long",attrs:{src:"/static/image/logo/hcos.png"}})]),this._v(" "),e("a",{attrs:{href:"https://unihub.hfcc.com.tw",target:"_blank"}},[e("img",{staticClass:"logo",attrs:{src:"/static/image/logo/unihub.png"}})]),this._v(" "),e("a",{attrs:{href:"http://goodwork.hfcc.com.tw",target:"_blank"}},[e("img",{staticClass:"logo-long",attrs:{src:"/static/image/logo/goodwork.png"}})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mid-title"},[this._v("\r\n\t\t\t\t開發者\r\n\t\t\t\t"),e("div",{staticClass:"bottom-line"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"logo-container"},[e("a",{attrs:{href:"https://agawork.tw",target:"_blank"}},[e("img",{staticClass:"logo",attrs:{src:"/static/image/logo/agawork.png"}})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mid-title"},[this._v("\r\n\t\t\t\t相關資料\r\n\t\t\t\t"),e("div",{staticClass:"bottom-line"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"opendata"},[s("ul",[s("li",[t._v("\r\n\t\t\t\t\t\t⯁ "),s("a",{attrs:{href:"https://github.com/aga3134/CareTips",target:"_blank"}},[t._v("網站開放原始碼")])]),t._v(" "),s("li",[t._v("\r\n\t\t\t\t\t\t⯁ "),s("a",{attrs:{href:"https://docs.google.com/spreadsheets/d/11XRXJnxH_d1dDcN7p1sVahZa9aA_-PYmX8J_MZXPhZc/edit#gid=0",target:"_blank"}},[t._v("Omaha System三大表格中譯資料")])]),t._v(" "),s("li",[t._v("\r\n\t\t\t\t\t\t⯁ "),s("a",{attrs:{href:"https://openhcos.github.io/radio-to-broadcast/",target:"_blank"}},[t._v("博祖克型態資源分享概念專案")])]),t._v(" "),s("li",[t._v("\r\n\t\t\t\t\t\t⯁ "),s("a",{attrs:{href:"https://drive.google.com/drive/folders/1ZCz6t9701eLw2hTjUbhfxnHwL1Nv-8ns",target:"_blank"}},[t._v("博祖克實驗 資訊系統議題松 成果")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mid-title"},[this._v("\r\n\t\t\t搜尋條件\r\n\t\t\t"),e("div",{staticClass:"bottom-line"})])}],!1,null,null,null));u.options.__file="src/vue/main-page.vue";var d=u.exports,m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"topbar"},[s("a",{staticClass:"logo",attrs:{href:"/"}},[s("img",{attrs:{src:t.logoImg}})]),t._v(" "),s("img",{staticClass:"menu-bt",attrs:{src:t.menuImg},on:{click:function(e){return t.ToggleMenu()}}}),t._v(" "),s("div",{staticClass:"bt-container"},t._l(t.activeItem.slice(0,t.itemInBar),(function(e){return s("a",{attrs:{href:e.link}},[s("div",{staticClass:"bt"},[t._v(t._s(e.name))])])})),0)]),t._v(" "),s("ul",{staticClass:"menu-container",class:{open:t.isOpen}},t._l(t.activeItem,(function(e){return s("li",[s("a",{attrs:{href:e.link}},[t._v(t._s(e.name))])])})),0)])};m._withStripped=!0;var p={data:function(){return{logoImg:"/static/image/logo-text.png",menuImg:"/static/image/menu-button.png",isOpen:!1,isLogin:!1,itemInBar:2,itemList:[{name:"新增案例",link:"/case/create",login:0},{name:"照服計算機",link:"/calculator",login:0},{name:"專業連結",link:"/profession",login:0},{name:"我的帳號",link:"",login:1},{name:"登入",link:"/auth/login",login:-1}],activeItem:[],user:{}}},created:function(){this.UpdateMenu()},methods:{SetUser:function(t){this.user=t,this.itemList[3].link="/user?target="+t.id,this.menuImg=t.icon,this.isLogin=!0,this.UpdateMenu()},ToggleMenu:function(){this.isOpen=!this.isOpen},CloseMenu:function(){this.isOpen=!1},UpdateMenu:function(){this.activeItem=[];for(var t=0;t<this.itemList.length;t++){var e=this.itemList[t];(1!=e.login||this.isLogin)&&(-1==e.login&&this.isLogin||this.activeItem.push(e))}},ChangeUserPhoto:function(t){this.user.photo=t.photo,this.user.icon=t.icon,this.menuImg=t.icon}}},h=(s(19),r(p,m,[],!1,null,null,null));h.options.__file="src/vue/topbar.vue";var f=h.exports,_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"care-calculator"},[s("div",{staticClass:"price-panel"},[s("div",{staticClass:"comp-header"},[t._v("照服計算機")]),t._v(" "),s("div",{staticClass:"option-container"},[s("div",{staticClass:"price-option"},[t._v("\r\n\t\t\t\t補助身份\r\n\t\t\t\t"),s("select",{directives:[{name:"model",rawName:"v-model",value:t.identity,expression:"identity"}],on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.identity=e.target.multiple?s:s[0]},function(e){return t.UpdatePrice()}]}},[s("option",{attrs:{value:"0"}},[t._v("低收入戶")]),t._v(" "),s("option",{attrs:{value:"1"}},[t._v("中低收入戶")]),t._v(" "),s("option",{attrs:{value:"2"}},[t._v("一般戶")])])]),t._v(" "),s("div",{staticClass:"price-option"},[t._v("\r\n\t\t\t\t長照需要等級\r\n\t\t\t\t"),s("select",{directives:[{name:"model",rawName:"v-model",value:t.careLevel,expression:"careLevel"}],on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.careLevel=e.target.multiple?s:s[0]},function(e){return t.UpdatePrice()}]}},[s("option",{attrs:{value:"0"}},[t._v("第一級")]),t._v(" "),s("option",{attrs:{value:"1"}},[t._v("第二級")]),t._v(" "),s("option",{attrs:{value:"2"}},[t._v("第三級")]),t._v(" "),s("option",{attrs:{value:"3"}},[t._v("第四級")]),t._v(" "),s("option",{attrs:{value:"4"}},[t._v("第五級")]),t._v(" "),s("option",{attrs:{value:"5"}},[t._v("第六級")]),t._v(" "),s("option",{attrs:{value:"6"}},[t._v("第七級")]),t._v(" "),s("option",{attrs:{value:"7"}},[t._v("第八級")])])]),t._v(" "),s("div",{staticClass:"price-option"},[t._v("\r\n\t\t\t\t交通接送分類\r\n\t\t\t\t"),s("select",{directives:[{name:"model",rawName:"v-model",value:t.transportLevel,expression:"transportLevel"}],on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.transportLevel=e.target.multiple?s:s[0]},function(e){return t.UpdatePrice()}]}},[s("option",{attrs:{value:"0"}},[t._v("第一類")]),t._v(" "),s("option",{attrs:{value:"1"}},[t._v("第二類")]),t._v(" "),s("option",{attrs:{value:"2"}},[t._v("第三類")]),t._v(" "),s("option",{attrs:{value:"3"}},[t._v("第四類")])])]),t._v(" "),s("div",{staticClass:"price-option"},[t._v("\r\n\t\t\t\t原民區或離島\r\n\t\t\t\t"),s("input",{directives:[{name:"model",rawName:"v-model",value:t.remoteArea,expression:"remoteArea"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.remoteArea)?t._i(t.remoteArea,null)>-1:t.remoteArea},on:{change:[function(e){var s=t.remoteArea,i=e.target,a=!!i.checked;if(Array.isArray(s)){var n=t._i(s,null);i.checked?n<0&&(t.remoteArea=s.concat([null])):n>-1&&(t.remoteArea=s.slice(0,n).concat(s.slice(n+1)))}else t.remoteArea=a},function(e){return t.UpdatePrice()}]}})])]),t._v(" "),s("div",{staticClass:"used-title"},[t._v("先前已使用額度")]),t._v(" "),s("div",{staticClass:"option-container"},[s("div",{staticClass:"price-option"},[t._v("\r\n\t\t\t\tB、C碼"),s("input",{directives:[{name:"model",rawName:"v-model",value:t.usedBC,expression:"usedBC"}],attrs:{type:"number",min:"0"},domProps:{value:t.usedBC},on:{change:function(e){return t.UpdatePrice()},input:function(e){e.target.composing||(t.usedBC=e.target.value)}}}),t._v("元\r\n\t\t\t")]),t._v(" "),s("div",{staticClass:"price-option"},[t._v("\r\n\t\t\t\tD碼"),s("input",{directives:[{name:"model",rawName:"v-model",value:t.usedD,expression:"usedD"}],attrs:{type:"number",min:"0"},domProps:{value:t.usedD},on:{change:function(e){return t.UpdatePrice()},input:function(e){e.target.composing||(t.usedD=e.target.value)}}}),t._v("元\r\n\t\t\t")]),t._v(" "),s("div",{staticClass:"price-option"},[t._v("\r\n\t\t\t\tE、F碼"),s("input",{directives:[{name:"model",rawName:"v-model",value:t.usedEF,expression:"usedEF"}],attrs:{type:"number",min:"0"},domProps:{value:t.usedEF},on:{change:function(e){return t.UpdatePrice()},input:function(e){e.target.composing||(t.usedEF=e.target.value)}}}),t._v("元\r\n\t\t\t")]),t._v(" "),s("div",{staticClass:"price-option"},[t._v("\r\n\t\t\t\tG碼"),s("input",{directives:[{name:"model",rawName:"v-model",value:t.usedG,expression:"usedG"}],attrs:{type:"number",min:"0"},domProps:{value:t.usedG},on:{change:function(e){return t.UpdatePrice()},input:function(e){e.target.composing||(t.usedG=e.target.value)}}}),t._v("元\r\n\t\t\t")])]),t._v(" "),s("div",{staticClass:"separator"}),t._v(" "),s("div",{staticClass:"table-container"},[s("table",{staticClass:"price-table"},[t._m(0),t._v(" "),s("tr",[s("td",{staticClass:"item-name"},[t._v("服務費用")]),t._v(" "),s("td",{staticClass:"large"},[t._v(t._s(t.totalPrice.service.total))]),t._v(" "),s("td",{staticClass:"large"},[t._v(t._s(t.totalPrice.service.gov))]),t._v(" "),s("td",{staticClass:"large"},[t._v(t._s(t.totalPrice.service.own))]),t._v(" "),s("td",[t._v("每月費用")])]),t._v(" "),s("tr",[s("td",{staticClass:"item-name"},[t._v("輔具/設施購買")]),t._v(" "),s("td",{staticClass:"large"},[t._v(t._s(t.totalPrice.equipBuy.total))]),t._v(" "),s("td",{staticClass:"large"},[t._v(t._s(t.totalPrice.equipBuy.gov))]),t._v(" "),s("td",{staticClass:"large"},[t._v(t._s(t.totalPrice.equipBuy.own))]),t._v(" "),s("td",[t._v("三年額度")])]),t._v(" "),s("tr",[s("td",{staticClass:"item-name"},[t._v("輔具/設施租賃")]),t._v(" "),s("td",{staticClass:"large"},[t._v(t._s(t.totalPrice.equipRent.total))]),t._v(" "),s("td",{staticClass:"large"},[t._v(t._s(t.totalPrice.equipRent.gov))]),t._v(" "),s("td",{staticClass:"large"},[t._v(t._s(t.totalPrice.equipRent.own))]),t._v(" "),s("td",[t.rentMonth<36?s("div",{staticClass:"remark"},[t._v("剩餘額度僅可支持租賃補助 "+t._s(t.rentMonth)+" 個月")]):s("div",[t._v("每月租金")])])]),t._v(" "),s("tr",[s("td",{staticClass:"item-name"},[t._v("喘息服務")]),t._v(" "),s("td",{staticClass:"large"},[t._v(t._s(t.totalPrice.rest.total))]),t._v(" "),s("td",{staticClass:"large"},[t._v(t._s(t.totalPrice.rest.gov))]),t._v(" "),s("td",{staticClass:"large"},[t._v(t._s(t.totalPrice.rest.own))]),t._v(" "),s("td",[t._v("每年額度")])])])]),t._v(" "),s("div",{staticClass:"input-bt-container"},[s("div",{staticClass:"input-bt",on:{click:function(e){t.openInputPanel=!0}}},[t._v("新增服務")]),t._v(" "),0==t.openDetail?s("div",{staticClass:"input-bt",on:{click:function(e){return t.ToggleDetail()}}},[t._v("細節展開")]):t._e(),t._v(" "),1==t.openDetail?s("div",{staticClass:"input-bt",on:{click:function(e){return t.ToggleDetail()}}},[t._v("細節關閉")]):t._e(),t._v(" "),s("div",{staticClass:"input-bt",on:{click:function(e){return t.ClearService()}}},[t._v("全部重設")])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.openDetail,expression:"openDetail"}]},[s("a",{attrs:{name:"openDetail"}}),t._v(" "),s("div",{staticClass:"price-summary"},[s("div",{staticClass:"sub-header"},[t._v("服務金額")]),t._v(" "),s("div",{staticClass:"price-category cat-A"},[t._v("\r\n\t\t\t\t\tA碼: "+t._s(t.price.A.total)+" 元\r\n\t\t\t\t")]),t._v(" "),s("div",{staticClass:"price-category cat-B"},[t._v("\r\n\t\t\t\t\tB碼: "+t._s(t.price.B.total)+" 元\r\n\t\t\t\t")]),t._v(" "),s("div",{staticClass:"price-category cat-C"},[t._v("\r\n\t\t\t\t\tC碼: "+t._s(t.price.C.total)+" 元\r\n\t\t\t\t")]),t._v(" "),s("div",{staticClass:"price-category cat-D"},[t._v("\r\n\t\t\t\t\tD碼: "+t._s(t.price.D.total)+" 元\r\n\t\t\t\t")]),t._v(" "),s("div",{staticClass:"price-category cat-E"},[t._v("\r\n\t\t\t\t\tE碼(租賃): "+t._s(t.price["E-Rent"].total)+" 元\r\n\t\t\t\t")]),t._v(" "),s("div",{staticClass:"price-category cat-E"},[t._v("\r\n\t\t\t\t\tE碼(購買): "+t._s(t.price["E-Buy"].total)+" 元\r\n\t\t\t\t")]),t._v(" "),s("div",{staticClass:"price-category cat-F"},[t._v("\r\n\t\t\t\t\tF碼(租賃): "+t._s(t.price["F-Rent"].total)+" 元\r\n\t\t\t\t")]),t._v(" "),s("div",{staticClass:"price-category cat-F"},[t._v("\r\n\t\t\t\t\tF碼(購買): "+t._s(t.price["F-Buy"].total)+" 元\r\n\t\t\t\t")]),t._v(" "),s("div",{staticClass:"price-category cat-G"},[t._v("\r\n\t\t\t\t\tG碼: "+t._s(t.price.G.total)+" 元\r\n\t\t\t\t")])]),t._v(" "),s("div",{staticClass:"price-summary"},[s("div",{staticClass:"sub-header"},[t._v("補助金額")]),t._v(" "),t.header?s("div",[s("div",{staticClass:"price-limit"},[t._v("B+C碼可用額度: "+t._s(Math.max(0,t.header.payment[0].pay[t.careLevel]-t.usedBC))+" 元/月")]),t._v(" "),s("div",{staticClass:"price-limit"},[t._v("D碼可用額度: "+t._s(Math.max(0,t.header.payment[parseInt(t.transportLevel)+1].pay[t.careLevel]-t.usedD))+" 元/月")]),t._v(" "),s("div",{staticClass:"price-limit"},[t._v("E+F碼可用額度: "+t._s(Math.max(0,t.header.payment[5].pay[t.careLevel]-t.usedEF))+" 元/3年")]),t._v(" "),s("div",{staticClass:"price-limit"},[t._v("G碼可用額度: "+t._s(Math.max(0,t.header.payment[6].pay[t.careLevel]-t.usedG))+" 元/年")])]):t._e(),t._v(" "),s("div",{staticClass:"price-category cat-A"},[t._v("\r\n\t\t\t\t\tA碼: "+t._s(t.price.A.gov)+" 元\r\n\t\t\t\t")]),t._v(" "),s("div",{staticClass:"price-category cat-B"},[t._v("\r\n\t\t\t\t\tB碼: "+t._s(t.price.B.gov)+" 元\r\n\t\t\t\t")]),t._v(" "),s("div",{staticClass:"price-category cat-C"},[t._v("\r\n\t\t\t\t\tC碼: "+t._s(t.price.C.gov)+" 元\r\n\t\t\t\t")]),t._v(" "),s("div",{staticClass:"price-category cat-D"},[t._v("\r\n\t\t\t\t\tD碼: "+t._s(t.price.D.gov)+" 元\r\n\t\t\t\t")]),t._v(" "),s("div",{staticClass:"price-category cat-E"},[t._v("\r\n\t\t\t\t\tE碼(租賃): "+t._s(t.price["E-Rent"].gov)+" 元\r\n\t\t\t\t")]),t._v(" "),s("div",{staticClass:"price-category cat-E"},[t._v("\r\n\t\t\t\t\tE碼(購買): "+t._s(t.price["E-Buy"].gov)+" 元\r\n\t\t\t\t")]),t._v(" "),s("div",{staticClass:"price-category cat-F"},[t._v("\r\n\t\t\t\t\tF碼(租賃): "+t._s(t.price["F-Rent"].gov)+" 元\r\n\t\t\t\t")]),t._v(" "),s("div",{staticClass:"price-category cat-F"},[t._v("\r\n\t\t\t\t\tF碼(購買): "+t._s(t.price["F-Buy"].gov)+" 元\r\n\t\t\t\t")]),t._v(" "),s("div",{staticClass:"price-category cat-G"},[t._v("\r\n\t\t\t\t\tG碼: "+t._s(t.price.G.gov)+" 元\r\n\t\t\t\t")])]),t._v(" "),s("div",{staticClass:"price-summary"},[s("div",{staticClass:"sub-header"},[t._v("自費金額")]),t._v(" "),t.header?s("div",[s("div",{staticClass:"price-limit"},[t._v("B+C碼自費比例: "+t._s(t.header.payment[0].rate[t.identity])+" %")]),t._v(" "),s("div",{staticClass:"price-limit"},[t._v("D碼自費比例: "+t._s(t.header.payment[parseInt(t.transportLevel)+1].rate[t.identity])+" %")]),t._v(" "),s("div",{staticClass:"price-limit"},[t._v("E+F碼自費比例: "+t._s(t.header.payment[5].rate[t.identity])+" %")]),t._v(" "),s("div",{staticClass:"price-limit"},[t._v("G碼自費比例: "+t._s(t.header.payment[6].rate[t.identity])+" %")])]):t._e(),t._v(" "),s("div",{staticClass:"price-category cat-A"},[t._v("\r\n\t\t\t\t\tA碼: "+t._s(t.price.A.own)+" 元\r\n\t\t\t\t")]),t._v(" "),s("div",{staticClass:"price-category cat-B"},[t._v("\r\n\t\t\t\t\tB碼: "+t._s(t.price.B.own)+" 元\r\n\t\t\t\t")]),t._v(" "),s("div",{staticClass:"price-category cat-C"},[t._v("\r\n\t\t\t\t\tC碼: "+t._s(t.price.C.own)+" 元\r\n\t\t\t\t")]),t._v(" "),s("div",{staticClass:"price-category cat-D"},[t._v("\r\n\t\t\t\t\tD碼: "+t._s(t.price.D.own)+" 元\r\n\t\t\t\t")]),t._v(" "),s("div",{staticClass:"price-category cat-E"},[t._v("\r\n\t\t\t\t\tE碼(租賃): "+t._s(t.price["E-Rent"].own)+" 元\r\n\t\t\t\t")]),t._v(" "),s("div",{staticClass:"price-category cat-E"},[t._v("\r\n\t\t\t\t\tE碼(購買): "+t._s(t.price["E-Buy"].own)+" 元\r\n\t\t\t\t")]),t._v(" "),s("div",{staticClass:"price-category cat-F"},[t._v("\r\n\t\t\t\t\tF碼(租賃): "+t._s(t.price["F-Rent"].own)+" 元\r\n\t\t\t\t")]),t._v(" "),s("div",{staticClass:"price-category cat-F"},[t._v("\r\n\t\t\t\t\tF碼(購買): "+t._s(t.price["F-Buy"].own)+" 元\r\n\t\t\t\t")]),t._v(" "),s("div",{staticClass:"price-category cat-G"},[t._v("\r\n\t\t\t\t\tG碼: "+t._s(t.price.G.own)+" 元\r\n\t\t\t\t")]),t._v(" "),s("div",{staticClass:"price-category cat-O"},[t._v("\r\n\t\t\t\t\t自費服務: "+t._s(t.price.O.own)+" 元\r\n\t\t\t\t")])])])]),t._v(" "),s("div",{staticClass:"service-list"},[s("div",{staticClass:"comp-header"},[t._v("服務套餐")]),t._v(" "),s("div",{staticClass:"service-container"},[t._m(1),t._v(" "),t._l(t.items.A,(function(e,i){return s("div",{staticClass:"service-item cat-A half-w"},[s("div",{staticClass:"item-title"},[t._v(t._s(e.code)+" "+t._s(e.name))]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0==t.remoteArea,expression:"remoteArea == false"}],staticClass:"item-attr"},[t._v("一般價格: "+t._s(e.price)+" 元")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.remoteArea,expression:"remoteArea == true"}],staticClass:"item-attr"},[t._v("原民區或離島價格: "+t._s(e.priceRemote)+" 元")]),t._v(" "),s("div",{staticClass:"item-attr"},[t._v("數量: "+t._s(e.num))]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0==t.remoteArea,expression:"remoteArea == false"}],staticClass:"item-attr"},[t._v("總價: "+t._s(e.price*e.num)+" 元")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.remoteArea,expression:"remoteArea == true"}],staticClass:"item-attr"},[t._v("總價: "+t._s(e.priceRemote*e.num)+" 元")]),t._v(" "),s("div",{staticClass:"item-bt-container"},[s("div",{staticClass:"item-bt",on:{click:function(e){return t.ModifyItem("A",i)}}},[t._v("修改")]),t._v(" "),s("div",{staticClass:"item-bt",on:{click:function(e){return t.DeleteItem("A",i)}}},[t._v("刪除")])])])})),t._v(" "),t._l(t.items.B,(function(e,i){return s("div",{staticClass:"service-item cat-B half-w"},[s("div",{staticClass:"item-title"},[t._v(t._s(e.code)+" "+t._s(e.name))]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0==t.remoteArea,expression:"remoteArea == false"}],staticClass:"item-attr"},[t._v("一般價格: "+t._s(e.price)+" 元")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.remoteArea,expression:"remoteArea == true"}],staticClass:"item-attr"},[t._v("原民區或離島價格: "+t._s(e.priceRemote)+" 元")]),t._v(" "),s("div",{staticClass:"item-attr"},[t._v("數量: "+t._s(e.num))]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0==t.remoteArea,expression:"remoteArea == false"}],staticClass:"item-attr"},[t._v("總價: "+t._s(e.price*e.num)+" 元")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.remoteArea,expression:"remoteArea == true"}],staticClass:"item-attr"},[t._v("總價: "+t._s(e.priceRemote*e.num)+" 元")]),t._v(" "),s("div",{staticClass:"item-bt-container"},[s("div",{staticClass:"item-bt",on:{click:function(e){return t.ModifyItem("B",i)}}},[t._v("修改")]),t._v(" "),s("div",{staticClass:"item-bt",on:{click:function(e){return t.DeleteItem("B",i)}}},[t._v("刪除")])])])})),t._v(" "),t._l(t.items.C,(function(e,i){return s("div",{staticClass:"service-item cat-C half-w"},[s("div",{staticClass:"item-title"},[t._v(t._s(e.code)+" "+t._s(e.name))]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0==t.remoteArea,expression:"remoteArea == false"}],staticClass:"item-attr"},[t._v("一般價格: "+t._s(e.price)+" 元")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.remoteArea,expression:"remoteArea == true"}],staticClass:"item-attr"},[t._v("原民區或離島價格: "+t._s(e.priceRemote)+" 元")]),t._v(" "),s("div",{staticClass:"item-attr"},[t._v("數量: "+t._s(e.num))]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0==t.remoteArea,expression:"remoteArea == false"}],staticClass:"item-attr"},[t._v("總價: "+t._s(e.price*e.num)+" 元")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.remoteArea,expression:"remoteArea == true"}],staticClass:"item-attr"},[t._v("總價: "+t._s(e.priceRemote*e.num)+" 元")]),t._v(" "),s("div",{staticClass:"item-bt-container"},[s("div",{staticClass:"item-bt",on:{click:function(e){return t.ModifyItem("C",i)}}},[t._v("修改")]),t._v(" "),s("div",{staticClass:"item-bt",on:{click:function(e){return t.DeleteItem("C",i)}}},[t._v("刪除")])])])})),t._v(" "),t._l(t.items.D,(function(e,i){return s("div",{staticClass:"service-item cat-D half-w"},[s("div",{staticClass:"item-title"},[t._v(t._s(e.code)+" "+t._s(e.name))]),t._v(" "),s("div",{staticClass:"item-attr"},[t._v("縣市核定價格: "+t._s(e.price)+" 元")]),t._v(" "),s("div",{staticClass:"item-attr"},[t._v("數量: "+t._s(e.num))]),t._v(" "),s("div",{staticClass:"item-attr"},[t._v("總價: "+t._s(e.price*e.num)+" 元")]),t._v(" "),s("div",{staticClass:"item-bt-container"},[s("div",{staticClass:"item-bt",on:{click:function(e){return t.ModifyItem("D",i)}}},[t._v("修改")]),t._v(" "),s("div",{staticClass:"item-bt",on:{click:function(e){return t.DeleteItem("D",i)}}},[t._v("刪除")])])])})),t._v(" "),t._l(t.items.E,(function(e,i){return s("div",{staticClass:"service-item cat-E half-w"},[s("div",{staticClass:"item-title"},[t._v(t._s(e.code)+" "+t._s(e.name))]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0==e.isRent,expression:"item.isRent == 0"}],staticClass:"item-attr"},[t._v("購買價格: "+t._s(e.price)+" 元")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0==e.isRent,expression:"item.isRent == 0"}],staticClass:"item-attr"},[t._v("購買給付上限: "+t._s(e.payForBuy)+" 元")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:1==e.isRent,expression:"item.isRent == 1"}],staticClass:"item-attr"},[t._v("租賃價格: "+t._s(e.price)+" 元")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:1==e.isRent,expression:"item.isRent == 1"}],staticClass:"item-attr"},[t._v("租賃給付上限: "+t._s(e.payForRent)+" 元")]),t._v(" "),s("div",{staticClass:"item-attr"},[t._v("數量: "+t._s(e.num))]),t._v(" "),s("div",{staticClass:"item-attr"},[t._v("總價: "+t._s(e.price*e.num)+" 元")]),t._v(" "),s("div",{staticClass:"item-bt-container"},[s("div",{staticClass:"item-bt",on:{click:function(e){return t.ModifyItem("E",i)}}},[t._v("修改")]),t._v(" "),s("div",{staticClass:"item-bt",on:{click:function(e){return t.DeleteItem("E",i)}}},[t._v("刪除")])])])})),t._v(" "),t._l(t.items.F,(function(e,i){return s("div",{staticClass:"service-item cat-F half-w"},[s("div",{staticClass:"item-title"},[t._v(t._s(e.code)+" "+t._s(e.name))]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0==e.isRent,expression:"item.isRent == 0"}],staticClass:"item-attr"},[t._v("購買價格: "+t._s(e.price)+" 元")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0==e.isRent,expression:"item.isRent == 0"}],staticClass:"item-attr"},[t._v("購買給付上限: "+t._s(e.payForBuy)+" 元")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:1==e.isRent,expression:"item.isRent == 1"}],staticClass:"item-attr"},[t._v("租賃價格: "+t._s(e.price)+" 元")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:1==e.isRent,expression:"item.isRent == 1"}],staticClass:"item-attr"},[t._v("租賃給付上限: "+t._s(e.payForRent)+" 元")]),t._v(" "),s("div",{staticClass:"item-attr"},[t._v("數量: "+t._s(e.num))]),t._v(" "),s("div",{staticClass:"item-attr"},[t._v("總價: "+t._s(e.price*e.num)+" 元")]),t._v(" "),s("div",{staticClass:"item-bt-container"},[s("div",{staticClass:"item-bt",on:{click:function(e){return t.ModifyItem("F",i)}}},[t._v("修改")]),t._v(" "),s("div",{staticClass:"item-bt",on:{click:function(e){return t.DeleteItem("F",i)}}},[t._v("刪除")])])])})),t._v(" "),t._l(t.items.G,(function(e,i){return s("div",{staticClass:"service-item cat-G half-w"},[s("div",{staticClass:"item-title"},[t._v(t._s(e.code)+" "+t._s(e.name))]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0==t.remoteArea,expression:"remoteArea == false"}],staticClass:"item-attr"},[t._v("一般價格: "+t._s(e.price)+" 元")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.remoteArea,expression:"remoteArea == true"}],staticClass:"item-attr"},[t._v("原民區或離島價格: "+t._s(e.priceRemote)+" 元")]),t._v(" "),s("div",{staticClass:"item-attr"},[t._v("數量: "+t._s(e.num))]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0==t.remoteArea,expression:"remoteArea == false"}],staticClass:"item-attr"},[t._v("總價: "+t._s(e.price*e.num)+" 元")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.remoteArea,expression:"remoteArea == true"}],staticClass:"item-attr"},[t._v("總價: "+t._s(e.priceRemote*e.num)+" 元")]),t._v(" "),s("div",{staticClass:"item-bt-container"},[s("div",{staticClass:"item-bt",on:{click:function(e){return t.ModifyItem("G",i)}}},[t._v("修改")]),t._v(" "),s("div",{staticClass:"item-bt",on:{click:function(e){return t.DeleteItem("G",i)}}},[t._v("刪除")])])])})),t._v(" "),t._l(t.items.O,(function(e,i){return s("div",{staticClass:"service-item cat-O half-w"},[s("div",{staticClass:"item-title"},[t._v(t._s(e.code)+" "+t._s(e.name))]),t._v(" "),s("div",{staticClass:"item-attr"},[t._v("價格: "+t._s(e.price)+" 元")]),t._v(" "),s("div",{staticClass:"item-attr"},[t._v("數量: "+t._s(e.num))]),t._v(" "),s("div",{staticClass:"item-attr"},[t._v("總價: "+t._s(e.price*e.num)+" 元")]),t._v(" "),s("div",{staticClass:"item-bt-container"},[s("div",{staticClass:"item-bt",on:{click:function(e){return t.ModifyItem("O",i)}}},[t._v("修改")]),t._v(" "),s("div",{staticClass:"item-bt",on:{click:function(e){return t.DeleteItem("O",i)}}},[t._v("刪除")])])])}))],2)]),t._v(" "),s("div",{staticClass:"tab-bar"},[s("div",{staticClass:"tab-bt-container"},[s("div",{staticClass:"tab-bt",on:{click:function(e){t.openInputPanel=!0}}},[t._v("新增服務")]),t._v(" "),s("div",{staticClass:"tab-bt",class:{on:t.openDetail},on:{click:function(e){return t.ToggleDetail()}}},[t._v("細節展開")]),t._v(" "),s("div",{staticClass:"tab-bt",on:{click:function(e){return t.ClearService()}}},[t._v("全部重設")])])]),t._v(" "),s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.openInputPanel,expression:"openInputPanel"}],staticClass:"input-panel"},[s("div",{staticClass:"input-area"},[s("div",{staticClass:"close-bt",on:{click:function(e){return t.ClearModify()}}},[t._v("X")]),t._v(" "),s("div",{staticClass:"panel-title"},[t._v("新增服務")]),t._v(" "),s("care-service-selection",{ref:"serviceSelect",attrs:{calcPrice:"1"}}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.modify,expression:"!modify"}],staticClass:"input-bt",on:{click:function(e){return t.AddService()}}},[t._v("新增")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.modify,expression:"!modify"}],staticClass:"input-bt",on:{click:function(e){return t.ClearModify()}}},[t._v("取消")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.modify,expression:"modify"}],staticClass:"input-bt",on:{click:function(e){return t.DoModify()}}},[t._v("修改")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.modify,expression:"modify"}],staticClass:"input-bt",on:{click:function(e){return t.ClearModify()}}},[t._v("取消修改")])],1)])])],1)};_._withStripped=!0;var C=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.serviceCode?s("div",{staticClass:"care-service-selection"},[s("div",{staticClass:"input-item"},[s("div",{staticClass:"input-label"},[t._v("主類")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.mainCategory,expression:"mainCategory"}],on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.mainCategory=e.target.multiple?s:s[0]},function(e){return t.UpdateMainCategory()}]}},t._l(t.serviceCode.service,(function(e,i){return s("option",{domProps:{value:i}},[t._v(t._s(e.code)+" "+t._s(e.name))])})),0)]),t._v(" "),t.serviceCode.service[t.mainCategory].items.length>1?s("div",{staticClass:"input-item"},[s("div",{staticClass:"input-label"},[t._v("子類")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.subCategory,expression:"subCategory"}],on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.subCategory=e.target.multiple?s:s[0]},function(e){return t.UpdateSubCategory()}]}},t._l(t.serviceCode.service[t.mainCategory].items,(function(e,i){return s("option",{domProps:{value:i}},[t._v(t._s(e.code)+" "+t._s(e.name))])})),0)]):t._e(),t._v(" "),7!=t.mainCategory?s("div",{staticClass:"input-item"},[s("div",{staticClass:"input-label"},[t._v("項目")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.selectService,expression:"selectService"}],on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selectService=e.target.multiple?s:s[0]},function(e){return t.UpdateItemInfo()}]}},t._l(t.serviceCode.service[t.mainCategory].items[t.subCategory].items,(function(e,i){return s("option",{domProps:{value:i}},[t._v(t._s(e.code)+" "+t._s(e.name))])})),0),t._v(" "),s("img",{staticClass:"filter-icon",attrs:{src:"/static/image/search-icon.png"},on:{click:function(e){return t.OpenFilterPanel()}}})]):t._e(),t._v(" "),"1"==t.calcPrice?s("div",[s("div",{staticClass:"input-item"},[4==t.mainCategory||5==t.mainCategory?s("div",{staticClass:"item"},[s("div",{staticClass:"input-label"},[t._v("方式")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.isRent,expression:"isRent"}],on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.isRent=e.target.multiple?s:s[0]}}},[s("option",{directives:[{name:"show",rawName:"v-show",value:"不適用"!==t.itemInfo.payForBuy,expression:"itemInfo.payForBuy !== '不適用' "}],attrs:{value:"0"}},[t._v("購買")]),t._v(" "),s("option",{directives:[{name:"show",rawName:"v-show",value:"不適用"!==t.itemInfo.payForRent,expression:"itemInfo.payForRent !== '不適用' "}],attrs:{value:"1"}},[t._v("租賃")])])]):t._e(),t._v(" "),7==t.mainCategory?s("div",{staticClass:"item"},[s("div",{staticClass:"input-label"},[t._v("服務名稱")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.customName,expression:"customName"}],attrs:{type:"text"},domProps:{value:t.customName},on:{input:function(e){e.target.composing||(t.customName=e.target.value)}}})]):t._e(),t._v(" "),3==t.mainCategory||4==t.mainCategory||5==t.mainCategory||7==t.mainCategory?s("div",{staticClass:"item"},[s("div",{staticClass:"input-label"},[t._v("價格")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.customPrice,expression:"customPrice"}],attrs:{type:"number",min:"1"},domProps:{value:t.customPrice},on:{input:function(e){e.target.composing||(t.customPrice=e.target.value)}}})]):t._e(),t._v(" "),s("div",{staticClass:"item"},[s("div",{staticClass:"input-label"},[t._v("數量")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.serviceCount,expression:"serviceCount"}],attrs:{type:"number",min:"1",max:"100"},domProps:{value:t.serviceCount},on:{input:function(e){e.target.composing||(t.serviceCount=e.target.value)}}})])])]):t._e()]):t._e(),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.openFilterPanel,expression:"openFilterPanel"}],staticClass:"popup-panel"},[s("div",{staticClass:"input-area"},[s("div",{staticClass:"close-bt",on:{click:function(e){return t.CloseFilterPanel()}}},[t._v("X")]),t._v(" "),s("div",{staticClass:"input-item"},[s("div",{staticClass:"input-label"},[t._v("篩選")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filterInput,expression:"filterInput"}],ref:"filterInput",attrs:{type:"text"},domProps:{value:t.filterInput},on:{keyup:function(e){return t.UpdateFilterList()},input:function(e){e.target.composing||(t.filterInput=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"filter-list"},t._l(t.filterList,(function(e){return e.num>0?s("div",{staticClass:"filter-category"},t._l(e.items,(function(e){return e.items.length>0?s("div",{staticClass:"filter-problem"},t._l(e.items,(function(e){return s("div",{staticClass:"filter-item",on:{click:function(s){return t.SelectFilterItem(e.mainCat,e.subCat,e.itemIndex)}}},[t._v("\r\n\t\t\t\t\t\t\t"+t._s(e.code)+" - "+t._s(e.name)+"\r\n\t\t\t\t\t\t")])})),0):t._e()})),0):t._e()})),0)])])])};C._withStripped=!0;s(0);var g={props:["calcPrice"],data:function(){return{serviceCode:null,customPrice:0,customName:"自費服務",isRent:0,mainCategory:0,subCategory:0,selectService:0,itemInfo:null,serviceCount:1,openFilterPanel:!1,filterInput:"",filterList:[]}},created:function(){$.get("/static/service-code.json",function(t){this.serviceCode=t,this.UpdateItemInfo()}.bind(this))},methods:{GetServiceCode:function(){return this.serviceCode},GetSelectService:function(){var t={};return t.customPrice=this.customPrice,t.customName=this.customName,t.isRent=this.isRent,t.mainCategory=this.mainCategory,t.subCategory=this.subCategory,t.selectService=this.selectService,t.itemInfo=this.itemInfo,t.serviceCount=this.serviceCount,t},GetSelectItem:function(){var t=this.serviceCode.service[this.mainCategory].code,e={};switch(e.category=t,e.mainCategory=this.mainCategory,e.subCategory=this.subCategory,e.selectService=this.selectService,e.code=this.itemInfo.code,e.name=this.itemInfo.name,e.num=this.serviceCount,t){case"A":case"B":case"C":case"G":e.price=this.itemInfo.price,e.priceRemote=this.itemInfo.priceRemote;break;case"D":e.price=this.customPrice,e.priceRemote=this.customPrice;break;case"E":case"F":e.isRent=this.isRent,e.price=this.customPrice,e.priceRemote=this.customPrice,e.payForRent=this.itemInfo.payForRent,e.payForBuy=this.itemInfo.payForBuy;break;case"O":e.price=this.customPrice,e.priceRemote=this.customPrice,e.name=this.customName}return e},SetSelectItem:function(t){var e=t.category;switch(this.mainCategory=t.mainCategory,this.subCategory=t.subCategory,this.selectService=t.selectService,this.itemInfo=this.serviceCode.service[this.mainCategory].items[this.subCategory].items[this.selectService],this.serviceCount=t.num,e){case"A":case"B":case"C":case"G":break;case"D":this.customPrice=t.price;break;case"E":case"F":this.isRent=t.isRent,this.customPrice=t.price;break;case"O":this.customPrice=t.price,this.customName=t.name}},UpdateMainCategory:function(){this.subCategory=0,this.selectService=0,this.UpdateItemInfo()},UpdateSubCategory:function(){this.selectService=0,this.UpdateItemInfo()},UpdateItemInfo:function(){this.customPrice=0,this.serviceCount=1,this.itemInfo=this.serviceCode.service[this.mainCategory].items[this.subCategory].items[this.selectService];var t=this.serviceCode.service[this.mainCategory].code;"E"!=t&&"F"!=t||("不適用"==this.itemInfo.payForRent&&1==this.isRent?this.isRent=0:"不適用"==this.itemInfo.payForBuy&&0==this.isRent&&(this.isRent=1))},OpenFilterPanel:function(){this.openFilterPanel=!0,this.$parent.enableAddButton=!1,this.UpdateFilterList(),setTimeout(function(){this.$refs.filterInput.focus()}.bind(this),10)},CloseFilterPanel:function(){this.openFilterPanel=!1},UpdateFilterList:function(){this.filterList=[];for(var t=0;t<this.serviceCode.service.length;t++){for(var e=this.serviceCode.service[t],s={code:e.code,name:e.name,items:[],num:0},i=0;i<e.items.length;i++){for(var a=e.items[i],n={code:a.code,name:a.name,items:[]},o=0;o<a.items.length;o++){var r=a.items[o];(r.name.includes(this.filterInput)||r.code.includes(this.filterInput))&&n.items.push({code:r.code,name:r.name,mainCat:t,subCat:i,itemIndex:o})}s.items.push(n),s.num+=n.items.length}this.filterList.push(s)}},SelectFilterItem:function(t,e,s){this.mainCategory=t,this.subCategory=e,this.selectService=s,this.UpdateItemInfo(),this.CloseFilterPanel()}}},w=(s(20),r(g,C,[],!1,null,null,null));w.options.__file="src/vue/care-service-selection.vue";var y=w.exports,b=s(0),k={data:function(){return{identity:2,careLevel:0,transportLevel:0,remoteArea:!1,usedBC:0,usedD:0,usedEF:0,usedG:0,openDetail:!1,price:{A:{total:0,gov:0,own:0},B:{total:0,gov:0,own:0},C:{total:0,gov:0,own:0},D:{total:0,gov:0,own:0},"E-Rent":{total:0,gov:0,own:0},"E-Buy":{total:0,gov:0,own:0},"F-Rent":{total:0,gov:0,own:0},"F-Buy":{total:0,gov:0,own:0},G:{total:0,gov:0,own:0},O:{total:0,gov:0,own:0}},rentMonth:36,totalPrice:{service:{total:0,gov:0,own:0},equipRent:{total:0,gov:0,own:0},equipBuy:{total:0,gov:0,own:0},rest:{total:0,gov:0,own:0}},header:null,items:{A:[],B:[],C:[],D:[],E:[],F:[],G:[],O:[]},openInputPanel:!1,modify:!1,modifyCategory:"",modifyIndex:-1}},components:{"care-service-selection":y},created:function(){var t=b.GetUrlParameter().solution;t&&$.get("/solution/view?solution="+t,function(t){if("ok"!=t.status)return alert("無法讀取解方");for(var e=JSON.parse(t.data.info).data[3][0],s=0;s<e.length;s++){var i=e[s];this.items[i.category].push(i)}this.UpdatePrice()}.bind(this))},methods:{UpdatePrice:function(){this.header||(this.header=this.$refs.serviceSelect.GetServiceCode());var t,e,s,i,a,n,o,r=this.remoteArea?"priceRemote":"price";s=this.items.A,e={total:0,gov:0,own:0};for(var c=0;c<s.length;c++){var l=(C=(_=s[c])[r])*_.num;e.total+=l,e.gov+=l}this.price.A=e,a=.01*(t=this.header.payment[0]).rate[this.identity],s=this.items.B,e={total:0,gov:0,own:0};for(c=0;c<s.length;c++){var v=(l=(C=(_=s[c])[r])*_.num)-(f=parseInt(C*a)*_.num);e.total+=l,e.own+=f,e.gov+=v}this.price.B=e,a=.01*t.rate[this.identity],s=this.items.C,e={total:0,gov:0,own:0};for(c=0;c<s.length;c++){v=(l=(C=(_=s[c])[r])*_.num)-(f=parseInt(C*a)*_.num);e.total+=l,e.own+=f,e.gov+=v}this.price.C=e,i=Math.max(0,t.pay[this.careLevel]-this.usedBC);var u=this.price.B.gov+this.price.C.gov;u>i&&((d=u-i)>this.price.C.gov?(this.price.C.own+=this.price.C.gov,d-=this.price.C.gov,this.price.C.gov=0):(this.price.C.own+=d,this.price.C.gov-=d,d=0),this.price.B.own+=d,this.price.B.gov-=d);a=.01*(t=this.header.payment[parseInt(this.transportLevel)+1]).rate[this.identity],s=this.items.D,e={total:0,gov:0,own:0};for(c=0;c<s.length;c++){v=(l=(C=(_=s[c])[r])*_.num)-(f=parseInt(C*a)*_.num);e.total+=l,e.own+=f,e.gov+=v}if(i=Math.max(0,t.pay[this.careLevel]-this.usedD),e.gov>i){var d=e.gov-i;e.gov-=d,e.own+=d}this.price.D=e,a=.01*(t=this.header.payment[5]).rate[this.identity],s=this.items.E,n={total:0,gov:0,own:0},o={total:0,gov:0,own:0};for(c=0;c<s.length;c++){v=(l=(C=(_=s[c])[r])*_.num)-(f=parseInt(C*a)*_.num);if(_.isRent)(d=v-_.payForRent)>0&&(f+=d,v-=d),n.total+=l,n.own+=f,n.gov+=v;else(d=v-_.payForBuy)>0&&(f+=d,v-=d),o.total+=l,o.own+=f,o.gov+=v}this.price["E-Rent"]=n,this.price["E-Buy"]=o,a=.01*t.rate[this.identity],s=this.items.F,n={total:0,gov:0,own:0},o={total:0,gov:0,own:0};for(c=0;c<s.length;c++){v=(l=(C=(_=s[c])[r])*_.num)-(f=parseInt(C*a)*_.num);if(_.isRent)(d=v-_.payForRent)>0&&(f+=d,v-=d),n.total+=l,n.own+=f,n.gov+=v;else(d=v-_.payForBuy)>0&&(f+=d,v-=d),o.total+=l,o.own+=f,o.gov+=v}this.price["F-Rent"]=n,this.price["F-Buy"]=o,i=Math.max(0,t.pay[this.careLevel]-this.usedEF);var m=this.price["E-Buy"].gov+this.price["F-Buy"].gov,p=this.price["E-Rent"].gov+this.price["F-Rent"].gov;(d=m-i)>0&&(d>this.price["F-Buy"].gov?(this.price["F-Buy"].own+=this.price["F-Buy"].gov,d-=this.price["F-Buy"].gov,this.price["F-Buy"].gov=0):(this.price["F-Buy"].own+=d,this.price["F-Buy"].gov-=d,d=0),d>this.price["E-Buy"].gov?(this.price["E-Buy"].own+=this.price["E-Buy"].gov,d-=this.price["E-Buy"].gov,this.price["E-Buy"].gov=0):(this.price["E-Buy"].own+=d,this.price["E-Buy"].gov-=d,d=0));var h=i-m;this.rentMonth=0==p?36:h<0?0:(h/p).toFixed(2),a=.01*(t=this.header.payment[6]).rate[this.identity],s=this.items.G,e={total:0,gov:0,own:0};for(c=0;c<s.length;c++){var f;v=(l=(C=(_=s[c])[r])*_.num)-(f=parseInt(C*a)*_.num);e.total+=l,e.own+=f,e.gov+=v}if(i=Math.max(0,t.pay[this.careLevel]-this.usedG),e.gov>i){d=e.gov-i;e.gov-=d,e.own+=d}this.price.G=e,s=this.items.O,e={total:0,gov:0,own:0};for(c=0;c<s.length;c++){var _,C;l=(C=(_=s[c])[r])*_.num;e.total+=l,e.own+=l,e.gov+=0}this.price.O=e;var g={total:0,gov:0,own:0},w={total:0,gov:0,own:0},y={total:0,gov:0,own:0},b={total:0,gov:0,own:0};g.total=this.price.A.total+this.price.B.total+this.price.C.total+this.price.D.total+this.price.O.total,g.gov=this.price.A.gov+this.price.B.gov+this.price.C.gov+this.price.D.gov+this.price.O.gov,g.own=this.price.A.own+this.price.B.own+this.price.C.own+this.price.D.own+this.price.O.own,w.total=this.price["E-Buy"].total+this.price["F-Buy"].total,w.gov=this.price["E-Buy"].gov+this.price["F-Buy"].gov,w.own=this.price["E-Buy"].own+this.price["F-Buy"].own,y.total=this.price["E-Rent"].total+this.price["F-Rent"].total,y.gov=this.price["E-Rent"].gov+this.price["F-Rent"].gov,y.own=this.price["E-Rent"].own+this.price["F-Rent"].own,b.total=this.price.G.total,b.gov=this.price.G.gov,b.own=this.price.G.own,this.totalPrice.service=g,this.totalPrice.equipBuy=w,this.totalPrice.equipRent=y,this.totalPrice.rest=b},SortItemCategory:function(t){this.items[t].sort((function(t,e){return t.code<e.code?-1:t.code>e.code?1:0}))},AddService:function(){var t=this.$refs.serviceSelect.GetSelectItem();this.items[t.category].push(t),this.SortItemCategory(t.category),this.UpdatePrice(),this.openInputPanel=!1,this.$root.ShowMessage("加入服務 "+t.code)},ModifyItem:function(t,e){this.modify=!0,this.modifyCategory=t,this.modifyIndex=e;var s=this.items[t][e];this.$refs.serviceSelect.SetSelectItem(s),this.openInputPanel=!0},DoModify:function(){var t=this.$refs.serviceSelect.GetSelectItem();this.modifyCategory==t.category?this.items[this.modifyCategory][this.modifyIndex]=t:(this.items[this.modifyCategory].splice(this.modifyIndex,1),this.items[t.category].push(t)),this.SortItemCategory(t.category),this.ClearModify(),this.UpdatePrice()},ClearModify:function(){this.modify=!1,this.modifyCategory="",this.modifyIndex=-1,this.openInputPanel=!1},DeleteItem:function(t,e){if(confirm("確定刪除?")){var s=this.items[t];if(!s||e<0||e>=s.length)return;s.splice(e,1),this.UpdatePrice()}},ClearService:function(){confirm("確定全部重設?")&&(this.items={A:[],B:[],C:[],D:[],E:[],F:[],G:[],O:[]},this.UpdatePrice(),this.ClearModify())},ToggleDetail:function(){this.openDetail=!this.openDetail,this.openDetail&&setTimeout((function(){b.GoToAnchor("openDetail")}),10)}}},I=(s(21),r(k,_,[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",[s("th",[t._v("項目")]),t._v(" "),s("th",[t._v("總額(元)")]),t._v(" "),s("th",[t._v("補助(元)")]),t._v(" "),s("th",[t._v("自費(元)")]),t._v(" "),s("th",[t._v("備註")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"remark"},[this._v("*照服計算機 之計算方式依 "),e("a",{attrs:{href:"https://www.health.ntpc.gov.tw/archive/health_ntpc/6/file/107%E5%B9%B4%E5%BA%A6%E7%B5%A6%E4%BB%98%E5%8F%8A%E6%94%AF%E4%BB%98%E5%9F%BA%E6%BA%96.pdf",target:"_blank"}},[this._v("107年度給付及支付基準")]),this._v(" 設定，詳細說明請見該連結。")])}],!1,null,null,null));I.options.__file="src/vue/care-calculator.vue";var P=I.exports,S=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"loginPanel"},[s("div",{directives:[{name:"show",rawName:"v-show",value:"login"===t.mode,expression:"mode === 'login'"}],staticClass:"login"},[s("div",{staticClass:"method-title"},[t._v("社群登入")]),t._v(" "),s("div",{staticClass:"google-bt",on:{click:function(e){return t.LoginByGoogle()}}},[t._v("Google 登入")]),t._v(" "),s("div",{staticClass:"facebook-bt",on:{click:function(e){return t.LoginByFacebook()}}},[t._v("Facebook 登入")]),t._v(" "),s("div",{staticClass:"seperator"}),t._v(" "),s("div",{staticClass:"method-title"},[t._v("信箱登入")]),t._v(" "),s("form",{ref:"loginForm",attrs:{method:"post",action:t.pwLoginAction}},[s("div",{staticClass:"relative-box"},[s("div",{staticClass:"item-label"},[t._v("帳號")]),t._v(" "),s("div",{staticClass:"forget-password",on:{click:function(e){return t.ForgetPassword()}}},[t._v("忘記密碼")])]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{type:"email",name:"email",placeholder:"請輸入電子信箱"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._v(" "),s("div",{staticClass:"item-label"},[t._v("密碼")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",name:"password",placeholder:"請輸入密碼"},domProps:{value:t.password},on:{keyup:function(e){return e.type.indexOf("key")||13===e.keyCode?t.LoginByPassword():null},input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._v(" "),s("div",{staticClass:"login-bt",on:{click:function(e){return t.LoginByPassword()}}},[t._v("登入")])]),t._v(" "),s("div",{staticClass:"text-link",on:{click:function(e){t.mode="signup"}}},[t._v("註冊新帳號")])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"signup"===t.mode,expression:"mode === 'signup'"}],staticClass:"signup"},[s("div",{staticClass:"method-title"},[t._v("快速註冊")]),t._v(" "),s("div",{staticClass:"google-bt",on:{click:function(e){return t.LoginByGoogle()}}},[t._v("Google 註冊")]),t._v(" "),s("div",{staticClass:"facebook-bt",on:{click:function(e){return t.LoginByFacebook()}}},[t._v("Facebook 註冊")]),t._v(" "),s("div",{staticClass:"seperator"}),t._v(" "),s("form",{ref:"signupForm",attrs:{method:"post",action:t.pwSignupAction}},[s("div",{staticClass:"method-title"},[t._v("信箱註冊")]),t._v(" "),s("div",{staticClass:"item-label"},[t._v("帳號")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{type:"email",name:"email",placeholder:"請輸入電子信箱"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._v(" "),s("div",{staticClass:"item-label"},[t._v("姓名")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{type:"text",name:"name",placeholder:"請輸入姓名"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),t._v(" "),s("div",{staticClass:"item-label"},[t._v("密碼")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",name:"password",placeholder:"請輸入密碼"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._v(" "),s("div",{staticClass:"item-label"},[t._v("確認密碼")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.passwordConfirm,expression:"passwordConfirm"}],attrs:{type:"password",placeholder:"請再次確認密碼"},domProps:{value:t.passwordConfirm},on:{keyup:function(e){return e.type.indexOf("key")||13===e.keyCode?t.SignupByPassword():null},input:function(e){e.target.composing||(t.passwordConfirm=e.target.value)}}}),t._v(" "),s("div",{staticClass:"login-bt",on:{click:function(e){return t.SignupByPassword()}}},[t._v("註冊")])]),t._v(" "),s("div",{staticClass:"text-link",on:{click:function(e){t.mode="login"}}},[t._v("返回登入")])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"resetPassword"===t.mode,expression:"mode === 'resetPassword'"}],staticClass:"resetPassword"},[s("form",{ref:"resetForm",attrs:{method:"post",action:"/auth/reset-password"}},[s("div",{staticClass:"item-label"},[t._v("輸入新密碼")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",name:"password",placeholder:"請輸入密碼"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._v(" "),s("div",{staticClass:"item-label"},[t._v("確認新密碼")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.passwordConfirm,expression:"passwordConfirm"}],attrs:{type:"password",placeholder:"請再次確認密碼"},domProps:{value:t.passwordConfirm},on:{keyup:function(e){return e.type.indexOf("key")||13===e.keyCode?t.ResetPassword():null},input:function(e){e.target.composing||(t.passwordConfirm=e.target.value)}}}),t._v(" "),s("div",{staticClass:"login-bt",on:{click:function(e){return t.ResetPassword()}}},[t._v("重設密碼")])])])])};S._withStripped=!0;var x=s(0),D={data:function(){return{intentUrl:"",email:"",name:"",password:"",passwordConfirm:"",token:"",mode:"login",pwLoginAction:"/auth/login-by-password",pwSignupAction:"/auth/signup-by-password"}},created:function(){var t=x.GetUrlParameter();t.intentUrl&&(this.intentUrl=encodeURIComponent(t.intentUrl)),1==t.reset&&(this.mode="resetPassword",this.token=t.token)},methods:{ValidateEmail:function(t){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)},LoginByGoogle:function(){var t="/auth/login-by-google";this.intentUrl&&(t+="?intentUrl="+this.intentUrl),window.location.href=t},LoginByFacebook:function(){var t="/auth/login-by-facebook";this.intentUrl&&(t+="?intentUrl="+this.intentUrl),window.location.href=t},LoginByPassword:function(){return""==this.email?alert("請輸入電子信箱"):this.ValidateEmail(this.email)?""==this.password?alert("請輸入密碼"):(this.intentUrl&&(this.pwLoginAction="/auth/login-by-password?intentUrl="+this.intentUrl),void this.$refs.loginForm.submit()):alert("請輸入正確的電子信箱")},SignupByPassword:function(){return""==this.email?alert("請輸入電子信箱"):this.ValidateEmail(this.email)?""==this.password?alert("請輸入密碼"):""==this.name?alert("請輸入姓名"):this.password!=this.passwordConfirm?alert("請確認密碼一致"):(this.intentUrl&&(this.pwSignupAction="/auth/signup-by-password?intentUrl="+this.intentUrl),void this.$refs.signupForm.submit()):alert("請輸入正確的電子信箱")},ForgetPassword:function(){return""==this.email?alert("請輸入電子信箱"):this.ValidateEmail(this.email)?void $.post("/auth/forget-password",{email:this.email},(function(t){"ok"==t.status&&alert("修改密碼的連結已寄至您的信箱，請點擊連結並更新密碼")})):alert("請輸入正確的電子信箱")},ResetPassword:function(){return""==this.password?alert("請輸入密碼"):this.password!=this.passwordConfirm?alert("請確認密碼一致"):void $.post("/auth/reset-password",{password:this.password,token:this.token},(function(t){if("ok"==t.status)alert("密碼已更新，請重新登入");else switch(t.message){case"invalid token":alert("連結已失效");break;default:alert("密碼更新失敗")}window.location.href="/auth/login"}))}}},L=(s(22),r(D,S,[],!1,null,null,null));L.options.__file="src/vue/login-panel.vue";var N=L.exports,A=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"case-editor"},[s("div",{staticClass:"case-info"},[s("a",{attrs:{name:"caseDesc"}}),t._v(" "),s("div",{staticClass:"cat-header"},[t._v("新增案例")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.caseInfo.desc,expression:"caseInfo.desc"}],attrs:{placeholder:"請簡單描述案例之生活背景與問題摘要"},domProps:{value:t.caseInfo.desc},on:{change:function(e){t.dirty=!0},input:function(e){e.target.composing||t.$set(t.caseInfo,"desc",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"case-info"},[s("a",{attrs:{name:"caseProblem"}}),t._v(" "),s("div",{staticClass:"cat-header"},[t._v("問題列表")]),t._v(" "),s("div",{staticClass:"input-bt",on:{click:function(e){t.openInput=!0}}},[t._v("新增問題")]),t._v(" "),s("div",{staticClass:"problem-list"},t._l(["D1","D2","D3","D4"],(function(e){return s("div",{staticClass:"problem-cat"},[null!=t.omaha?s("div",{staticClass:"problem-header"},[t._v(t._s(t.omaha[e].name)+" ("+t._s(t.caseInfo.problem[e].length)+"項)")]):t._e(),t._v(" "),s("div",{staticClass:"problem-container"},t._l(t.caseInfo.problem[e],(function(i,a){return s("div",{staticClass:"problem-item one-third-w",class:"cat-"+e},[s("div",{staticClass:"problem-title"},[t._v(t._s(i.name))]),t._v(" "),s("div",{staticClass:"problem-body"},[s("div",{staticClass:"problem-desc"},[t._v(t._s(i.desc))]),t._v(" "),s("div",{staticClass:"item-bt-container"},[s("div",{staticClass:"item-bt",on:{click:function(s){return t.ModifyItem(e,a)}}},[t._v("修改")]),t._v(" "),s("div",{staticClass:"item-bt",on:{click:function(s){return t.DeleteItem(e,a)}}},[t._v("刪除")])])])])})),0)])})),0)]),t._v(" "),s("div",{staticClass:"case-info"},[s("div",{staticClass:"separator"},[t._v(" ")]),t._v(" "),s("div",{staticClass:"remark"},[s("a",{attrs:{name:"caseRemark"}}),t._v("\r\n\t\t\t\t*為協助照護經驗傳承與跨專業交流，您所分享的案例皆為公開可搜尋的資訊。請勿將實際個案的隱私資訊寫入案例中，以免侵犯個案隱私權。\r\n\t\t\t\t"),s("div",{staticClass:"remark-check"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.finalCheck,expression:"finalCheck"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.finalCheck)?t._i(t.finalCheck,null)>-1:t.finalCheck},on:{change:function(e){var s=t.finalCheck,i=e.target,a=!!i.checked;if(Array.isArray(s)){var n=t._i(s,null);i.checked?n<0&&(t.finalCheck=s.concat([null])):n>-1&&(t.finalCheck=s.slice(0,n).concat(s.slice(n+1)))}else t.finalCheck=a}}}),t._v(" 我了解了\r\n\t\t\t\t")])]),t._v(" "),s("div",{staticClass:"input-bt",on:{click:function(e){return t.SubmitCase()}}},[s("div",{directives:[{name:"show",rawName:"v-show",value:"create"==t.action,expression:"action == 'create'"}]},[t._v("送出案例")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"edit"==t.action,expression:"action == 'edit'"}]},[t._v("完成案例修改")])]),t._v(" "),s("div",{staticClass:"input-bt",on:{click:function(e){return t.CancelEdit()}}},[t._v("取消編輯")])]),t._v(" "),s("div",{staticClass:"tab-bar"},[s("div",{staticClass:"tab-bt-container"},[s("div",{staticClass:"tab-bt",on:{click:function(e){t.openInput=!0}}},[t._v("新增問題")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"create"==t.action,expression:"action == 'create'"}],staticClass:"tab-bt",on:{click:function(e){return t.SubmitCase()}}},[t._v("送出案例")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"edit"==t.action,expression:"action == 'edit'"}],staticClass:"tab-bt",on:{click:function(e){return t.SubmitCase()}}},[t._v("完成案例修改")]),t._v(" "),s("div",{staticClass:"tab-bt",on:{click:function(e){return t.CancelEdit()}}},[t._v("取消編輯")])])]),t._v(" "),s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.openInput,expression:"openInput"}],staticClass:"input-panel"},[null!=t.omaha?s("div",{staticClass:"input-area"},[s("div",{staticClass:"close-bt",on:{click:function(e){t.openInput=!1}}},[t._v("X")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.modify,expression:"!modify"}],staticClass:"box-title"},[t._v("新增問題")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.modify,expression:"modify"}],staticClass:"box-title"},[t._v("修改問題")]),t._v(" "),s("div",{staticClass:"input-item"},[s("div",{staticClass:"input-label"},[t._v("面向")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.selectDomain,expression:"selectDomain"}],on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selectDomain=e.target.multiple?s:s[0]},function(e){return t.ChangeDomain()}]}},[s("option",{attrs:{value:"D1"}},[t._v(t._s(t.omaha.D1.name))]),t._v(" "),s("option",{attrs:{value:"D2"}},[t._v(t._s(t.omaha.D2.name))]),t._v(" "),s("option",{attrs:{value:"D3"}},[t._v(t._s(t.omaha.D3.name))]),t._v(" "),s("option",{attrs:{value:"D4"}},[t._v(t._s(t.omaha.D4.name))])])]),t._v(" "),s("div",{staticClass:"input-item"},[s("div",{staticClass:"input-label"},[t._v("問題")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.selectProblem,expression:"selectProblem"}],on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selectProblem=e.target.multiple?s:s[0]},function(e){return t.ChangeProblem()}]}},t._l(t.omaha[t.selectDomain].problem,(function(e,i){return s("option",{domProps:{value:i}},[t._v(t._s(e.cht))])})),0)]),t._v(" "),s("div",{staticClass:"input-item"},[s("div",{staticClass:"input-label"},[t._v("徵兆")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.selectSign,expression:"selectSign"}],on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selectSign=e.target.multiple?s:s[0]}}},t._l(t.omaha[t.selectDomain].problem[t.selectProblem].sign,(function(e,i){return s("option",{domProps:{value:i}},[t._v(t._s(e.cht))])})),0),t._v(" "),s("img",{staticClass:"filter-icon",attrs:{src:"/static/image/search-icon.png"},on:{click:function(e){return t.OpenFilterPanel()}}})]),t._v(" "),s("div",{staticClass:"input-item"},[s("div",{staticClass:"input-label"},[t._v("問題狀況")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.problemDesc,expression:"problemDesc"}],attrs:{placeholder:"請簡單描述問題狀況"},domProps:{value:t.problemDesc},on:{input:function(e){e.target.composing||(t.problemDesc=e.target.value)}}})]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.modify,expression:"!modify"}],staticClass:"input-bt",on:{click:function(e){return t.AddProblem()}}},[t._v("新增")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.modify,expression:"!modify"}],staticClass:"input-bt",on:{click:function(e){t.openInput=!1}}},[t._v("取消")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.modify,expression:"modify"}],staticClass:"input-bt",on:{click:function(e){return t.DoModify()}}},[t._v("修改")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.modify,expression:"modify"}],staticClass:"input-bt",on:{click:function(e){return t.ClearModify()}}},[t._v("取消")])]):t._e()])]),t._v(" "),s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.openFilterPanel,expression:"openFilterPanel"}],staticClass:"input-panel"},[s("div",{staticClass:"input-area"},[s("div",{staticClass:"close-bt",on:{click:function(e){t.openFilterPanel=!1}}},[t._v("X")]),t._v(" "),s("div",{staticClass:"input-item"},[s("div",{staticClass:"input-label"},[t._v("篩選")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filterInput,expression:"filterInput"}],ref:"filterInput",attrs:{type:"text"},domProps:{value:t.filterInput},on:{keyup:function(e){return t.UpdateFilterList()},input:function(e){e.target.composing||(t.filterInput=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"filter-list"},t._l(t.filterList,(function(e){return e.num>0?s("div",{staticClass:"filter-category"},[s("div",{staticClass:"cat-label"},[t._v(t._s(e.name))]),t._v(" "),t._l(e.problem,(function(i,a){return i.sign.length>0?s("div",{staticClass:"filter-problem"},[s("div",{staticClass:"problem-label"},[t._v(t._s(i.cht))]),t._v(" "),t._l(i.sign,(function(i,a){return s("div",{staticClass:"filter-item",on:{click:function(s){return t.SelectFilterItem(e.id,i.pID,i.sID)}}},[t._v("\r\n\t\t\t\t\t\t\t\t\t"+t._s(i.cht)+"\r\n\t\t\t\t\t\t\t\t")])}))],2):t._e()}))],2):t._e()})),0)])])]),t._v(" "),s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.setupUserInfo,expression:"setupUserInfo"}],staticClass:"input-panel"},[s("div",{staticClass:"input-area"},[s("div",{staticClass:"panel-title"},[t._v("請先輸入您的個人資訊")]),t._v(" "),s("user-info-editor",{ref:"userInfoEditor"})],1)])])],1)])};A._withStripped=!0;var M=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"user-info-editor"},[s("div",{staticClass:"info-container"},[s("div",{staticClass:"info-box"},[s("img",{staticClass:"user-photo",attrs:{src:t.user.photo}}),t._v(" "),s("div",{staticClass:"photo-bt",on:{click:function(e){return t.ChangePhoto()}}},[t._v(t._s(t.uploadTitle))]),t._v(" "),s("input",{ref:"uploadBt",attrs:{type:"file",hidden:""},on:{change:t.UploadPhoto}})]),t._v(" "),s("div",{staticClass:"info-box grow"},[s("div",{staticClass:"info-label canNotEmpty"},[t._v("姓名")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.name,expression:"user.name"}],attrs:{type:"text"},domProps:{value:t.user.name},on:{change:function(e){t.dirty=!0},input:function(e){e.target.composing||t.$set(t.user,"name",e.target.value)}}}),t._v(" "),s("div",{staticClass:"info-label canNotEmpty"},[t._v("服務專業")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.selectProfession,expression:"selectProfession"}],on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selectProfession=e.target.multiple?s:s[0]},function(e){t.dirty=!0}]}},t._l(t.professions,(function(e){return s("option",{domProps:{value:e}},[t._v(t._s(e))])})),0),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"其他"==t.selectProfession,expression:"selectProfession == '其他' "}]},[s("div",{staticClass:"info-label canNotEmpty"},[t._v("請填寫服務專業")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.otherProfession,expression:"otherProfession"}],attrs:{type:"text"},domProps:{value:t.otherProfession},on:{change:function(e){t.dirty=!0},input:function(e){e.target.composing||(t.otherProfession=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"info-label"},[t._v("自我介紹")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.user.desc,expression:"user.desc"}],domProps:{value:t.user.desc},on:{change:function(e){t.dirty=!0},input:function(e){e.target.composing||t.$set(t.user,"desc",e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"sub-title"},[t._v("聯絡資訊")]),t._v(" "),s("div",{staticClass:"info-container"},[s("div",{staticClass:"info-box"},[s("div",{staticClass:"info-label"},[t._v("服務縣市")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.user.county,expression:"user.county"}],on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.user,"county",e.target.multiple?s:s[0])},function(e){t.dirty=!0}]}},t._l(t.counties,(function(e){return s("option",{domProps:{value:e}},[t._v(t._s(e))])})),0)]),t._v(" "),s("div",{staticClass:"info-box"},[s("div",{staticClass:"info-label"},[t._v("公司或組織名稱")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.company,expression:"user.company"}],attrs:{type:"text"},domProps:{value:t.user.company},on:{change:function(e){t.dirty=!0},input:function(e){e.target.composing||t.$set(t.user,"company",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"info-box"},[s("div",{staticClass:"info-label"},[t._v("服務聯絡信箱")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.contactEmail,expression:"user.contactEmail"}],attrs:{type:"text"},domProps:{value:t.user.contactEmail},on:{change:function(e){t.dirty=!0},input:function(e){e.target.composing||t.$set(t.user,"contactEmail",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"info-box"},[s("div",{staticClass:"info-label"},[t._v("服務聯絡電話")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.tel,expression:"user.tel"}],attrs:{type:"text"},domProps:{value:t.user.tel},on:{change:function(e){t.dirty=!0},input:function(e){e.target.composing||t.$set(t.user,"tel",e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"remark"},[t._v("\r\n\t\t\t*為協助跨專業交流與連結，您所填寫的資訊皆可被其他人搜尋到。如有隱私疑慮，請將該欄位留白。\r\n\t\t\t"),s("div",{staticClass:"remark-check"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.finalCheck,expression:"finalCheck"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.finalCheck)?t._i(t.finalCheck,null)>-1:t.finalCheck},on:{change:function(e){var s=t.finalCheck,i=e.target,a=!!i.checked;if(Array.isArray(s)){var n=t._i(s,null);i.checked?n<0&&(t.finalCheck=s.concat([null])):n>-1&&(t.finalCheck=s.slice(0,n).concat(s.slice(n+1)))}else t.finalCheck=a}}}),t._v(" 我了解了\r\n\t\t\t")])]),t._v(" "),s("div",{staticClass:"photo-bt",on:{click:function(e){return t.SubmitUserInfo()}}},[t._v("儲存")])])])};M._withStripped=!0;s(0);var E={data:function(){return{user:{},selectProfession:"",otherProfession:"",professions:[],counties:[],submitCallback:null,finalCheck:!1,dirty:!1,uploadTitle:"變更圖片"}},created:function(){$.get("/static/solution.json",function(t){this.professions=t.profession,this.counties=t.county}.bind(this)),window.onbeforeunload=function(){if(this.dirty)return""}.bind(this)},methods:{SetUser:function(t){this.user=t,this.InitSelectProfession()},ChangePhoto:function(){"變更圖片"==this.uploadTitle&&this.$refs.uploadBt.click()},UploadPhoto:function(t){if(0!=t.target.files.length){this.uploadTitle="上傳中...";var e=t.target.files[0],s=new FormData;s.append("uploadImage",e);var i=$("meta[name='csrf-token']").attr("content");$.ajax({url:"/user/upload-image?_csrf="+i,type:"POST",data:s,processData:!1,contentType:!1,success:function(t){if("ok"!=t.status)return alert("更新圖片失敗");this.uploadTitle="變更圖片",this.user.photo=t.data.photo,this.user.icon=t.data.icon,this.$root.ChangeUserPhoto(t.data)}.bind(this),error:function(t,e,s){console.log(s)}})}},InitSelectProfession:function(){this.user.profession&&(this.professions.includes(this.user.profession)?this.selectProfession=this.user.profession:(this.selectProfession="其他",this.otherProfession=this.user.profession))},SubmitUserInfo:function(){if("其他"==this.selectProfession?this.user.profession=this.otherProfession:this.user.profession=this.selectProfession,!this.user.name)return alert("請輸入您的姓名");if(!this.user.profession)return alert("請輸入您的服務專業");if(!this.finalCheck)return alert("請閱讀紅色警示文字並勾選「我了解了」");var t=$("meta[name='csrf-token']").attr("content");this.dirty=!1,$.post("/user/edit",{data:this.user,_csrf:t},function(t){this.submitCallback?this.submitCallback(t):(alert("ok"==t.status?"修改成功":"修改失敗"),this.$parent.UpdateUserInfo&&this.$parent.UpdateUserInfo(this.user))}.bind(this))}}},F=(s(23),r(E,M,[],!1,null,null,null));F.options.__file="src/vue/user-info-editor.vue";var U=F.exports,B=s(0),R={props:["action"],components:{"user-info-editor":U},data:function(){return{omaha:null,selectDomain:"D1",selectProblem:0,selectSign:0,problemDesc:"",openInput:!1,finalCheck:!1,caseInfo:{desc:"",problem:{D1:[],D2:[],D3:[],D4:[]}},caseID:null,modify:!1,modifyCategory:"",modifyIndex:-1,setupUserInfo:!1,user:null,openFilterPanel:!1,filterInput:"",filterList:{},dirty:!1}},created:function(){var t=B.GetUrlParameter();$.get("/static/omaha.json",function(e){if(this.omaha=e,"edit"==this.action){var s=t.case;$.get("/case/view?case="+s,function(t){if("ok"!=t.status)return window.location.href="/?message=存取案例失敗";this.caseID=s;var e=t.data,i=JSON.parse(e.info),a=i[i.length-1].problem;this.caseInfo.desc=e.desc,a.D1&&(this.caseInfo.problem.D1=a.D1),a.D2&&(this.caseInfo.problem.D2=a.D2),a.D3&&(this.caseInfo.problem.D3=a.D3),a.D4&&(this.caseInfo.problem.D4=a.D4)}.bind(this))}}.bind(this)),window.onbeforeunload=function(){if(this.dirty)return""}.bind(this)},methods:{SetUser:function(t){this.user=t,t.profession||(this.setupUserInfo=!0,this.$refs.userInfoEditor.submitCallback=function(t){this.setupUserInfo=!1}.bind(this),this.$refs.userInfoEditor.SetUser(t))},ChangeDomain:function(){this.selectProblem=0,this.selectSign=0},ChangeProblem:function(){this.selectSign=0},AddProblem:function(){this.dirty=!0;var t=this.selectDomain,e=this.omaha[t].problem[this.selectProblem],s=e.sign[this.selectSign],i={};i.id=t+"-"+e.id+"-"+s.id,i.name=s.cht,i.domainID=t,i.problemIndex=this.selectProblem,i.signIndex=this.selectSign,i.desc=this.problemDesc,this.caseInfo.problem[t].push(i),this.openInput=!1,this.problemDesc="",this.$root.ShowMessage("加入問題 "+i.id)},ModifyItem:function(t,e){this.modify=!0,this.modifyCategory=t,this.modifyIndex=e;var s=this.caseInfo.problem[t][e];this.selectDomain=s.domainID,this.selectProblem=s.problemIndex,this.selectSign=s.signIndex,this.problemDesc=s.desc,this.openInput=!0},DeleteItem:function(t,e){if(confirm("確定刪除?")){var s=this.caseInfo.problem[t];if(!s||e<0||e>=s.length)return;s.splice(e,1)}},DoModify:function(){this.dirty=!0;var t=this.selectDomain,e=this.omaha[t].problem[this.selectProblem],s=e.sign[this.selectSign],i={};i.id=t+"-"+e.id+"-"+s.id,i.name=s.cht,i.domainID=t,i.problemIndex=this.selectProblem,i.signIndex=this.selectSign,i.desc=this.problemDesc,this.modifyCategory==t?this.caseInfo.problem[this.modifyCategory][this.modifyIndex]=i:(this.caseInfo.problem[this.modifyCategory].splice(this.modifyIndex,1),this.caseInfo.problem[t].push(i)),this.ClearModify()},ClearModify:function(){this.modify=!1,this.modifyCategory="",this.modifyIndex=-1,this.problemDesc="",this.openInput=!1},OpenFilterPanel:function(){this.openFilterPanel=!0,this.UpdateFilterList(),setTimeout(function(){this.$refs.filterInput.focus()}.bind(this),10)},UpdateFilterList:function(){for(var t in this.filterList={},this.omaha)if("version"!=t){for(var e={id:t,name:this.omaha[t].name,problem:[],num:0},s=0;s<this.omaha[t].problem.length;s++){for(var i=this.omaha[t].problem[s],a={cht:i.cht,sign:[]},n=0;n<i.sign.length;n++){var o=i.sign[n];o.cht.includes(this.filterInput)&&a.sign.push({cht:o.cht,pID:s,sID:n})}e.problem.push(a),e.num+=a.sign.length}this.filterList[t]=e}},SelectFilterItem:function(t,e,s){this.selectDomain=t,this.selectProblem=e,this.selectSign=s,this.openFilterPanel=!1},SubmitCase:function(){if(""!=this.caseInfo.desc)if(0!=this.caseInfo.problem.D1.length||0!=this.caseInfo.problem.D2.length||0!=this.caseInfo.problem.D3.length||0!=this.caseInfo.problem.D4.length)if(this.finalCheck){this.caseInfo.omahaVersion=this.omaha.version,this.dirty=!1;var t=$("meta[name='csrf-token']").attr("content");switch(this.action){case"create":$.post("/case/create",{data:this.caseInfo,_csrf:t},(function(t){if("ok"!=t.status)return window.location.href="/?message=新增案例失敗";window.location.href="/case?case="+t.data}));break;case"edit":$.post("/case/edit?case="+this.caseID,{data:this.caseInfo,_csrf:t},(function(t){if("ok"!=t.status)return window.location.href="/?message=修改案例失敗";window.location.href="/case?case="+t.data}))}}else B.GoToAnchor("caseRemark",-80,(function(){alert("請閱讀紅色警示文字並勾選「我了解了」")}));else B.GoToAnchor("caseProblem",-80,(function(){alert("問題列表不能空白")}));else B.GoToAnchor("caseDesc",-80,(function(){alert("案例簡述不能空白")}))},CancelEdit:function(){this.dirty?confirm("確定取消案例編輯?")&&(window.location.href="/"):window.location.href="/"}}},V=(s(24),r(R,A,[],!1,null,null,null));V.options.__file="src/vue/case-editor.vue";var G=V.exports,T=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"case-view"},[t.caseInfo?s("div",{staticClass:"feedback-statistic"},[s("div",{staticClass:"container"},[t._v("\r\n\t\t\t版本號: "),s("div",{staticClass:"feedback-num"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.vIndex,expression:"vIndex"}],on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.vIndex=e.target.multiple?s:s[0]},function(e){return t.UpdateVersion()}]}},t._l(t.caseInfo.info,(function(e,i){return s("option",{domProps:{value:i}},[t._v(t._s(e.version))])})),0)])]),t._v(" "),s("div",{staticClass:"container clickable",on:{click:function(e){return t.ToggleLike()}}},[s("img",{staticClass:"feedback-icon",attrs:{src:"/static/image/like.png"}}),t._v(" "),s("div",{staticClass:"feedback-num"},[t._v(t._s(t.caseInfo.likeNum))])]),t._v(" "),s("div",{staticClass:"container"},[t._v("\r\n\t\t\t解方數"),s("div",{staticClass:"feedback-num"},[t._v(t._s(t.caseInfo.solNum))])]),t._v(" "),s("div",{staticClass:"container"},[t._v("\r\n\t\t\t觀看次數"),s("div",{staticClass:"feedback-num"},[t._v(t._s(t.caseInfo.viewNum))])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isMyCase,expression:"isMyCase"}],staticClass:"container"},[s("div",{staticClass:"action-bt",on:{click:function(e){return t.ModifyCase()}}},[t._v("修改案例")]),t._v(" "),s("div",{staticClass:"action-bt",on:{click:function(e){return t.DeleteCase()}}},[t._v("刪除案例")])]),t._v(" "),s("div",{staticClass:"action-bt",on:{click:function(e){return t.RandomCase()}}},[t._v("隨機解題")])]):t._e(),t._v(" "),s("div",{staticClass:"input-bt",on:{click:function(e){return t.ProvideSolution()}}},[t._v("我要解題")]),t._v(" "),s("div",{staticClass:"input-bt",on:{click:function(e){return t.ViewSolution(t.solutionID)}}},[t._v("觀看解方")]),t._v(" "),s("div",{staticClass:"case-title"},[t._v("案例簡述")]),t._v(" "),t.caseInfo?s("div",{staticClass:"case-desc"},[t._v(t._s(t.caseInfo.info[t.vIndex].desc))]):t._e(),t._v(" "),s("div",{staticClass:"case-title"},[t._v("問題列表")]),t._v(" "),t._l(["D1","D2","D3","D4"],(function(e){return s("div",{staticClass:"problem-cat"},[null!=t.omaha?s("div",{staticClass:"problem-header"},[t._v(t._s(t.omaha[e].name)+" ("+t._s(t.problem[e].length)+"項)")]):t._e(),t._v(" "),s("div",{staticClass:"problem-container"},t._l(t.problem[e],(function(i,a){return s("div",{staticClass:"problem-item one-third-w",class:"cat-"+e},[s("div",{staticClass:"problem-title"},[t._v(t._s(i.name))]),t._v(" "),s("div",{staticClass:"problem-body"},[s("div",{staticClass:"problem-desc"},[t._v(t._s(i.desc))]),t._v(" "),s("div",{staticClass:"item-bt-container"},[s("div",{staticClass:"item-bt",on:{click:function(s){return t.OpenSolutionPanel(e,a)}}},[t._v("解題")])])])])})),0)])})),t._v(" "),s("div",{staticClass:"case-title"},[t._v("分享者簡介")]),t._v(" "),t.caseInfo?s("div",{staticClass:"owner"},[s("a",{attrs:{href:"/user?target="+t.caseInfo.user.id}},[s("div",{staticClass:"owner-info"},[s("img",{staticClass:"owner-icon",attrs:{src:t.caseInfo.user.icon}}),t._v("\r\n\t\t\t\t"+t._s(t.caseInfo.user.profession)+" - "+t._s(t.caseInfo.user.name)+"\r\n\t\t\t")])]),t._v(" "),s("div",{staticClass:"owner-desc"},[t._v(t._s(t.caseInfo.user.desc))])]):t._e(),t._v(" "),s("div",{staticClass:"case-title"},[t._v("留言回饋")]),t._v(" "),s("div",{staticClass:"message-box"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.sendMessage,expression:"sendMessage"}],attrs:{placeholder:"留言給分享者..."},domProps:{value:t.sendMessage},on:{input:function(e){e.target.composing||(t.sendMessage=e.target.value)}}}),t._v(" "),s("div",{staticClass:"bt-container"},[s("div",{staticClass:"bt",on:{click:function(e){return t.SendMessage()}}},[t._v("送出")])])]),t._v(" "),t.caseInfo?s("div",{staticClass:"message-list"},[s("a",{attrs:{name:"messageList"}}),t._v(" "),t._l(t.messageList,(function(e,i){return s("div",{directives:[{name:"show",rawName:"v-show",value:e.caseVersion==t.caseInfo.info[t.vIndex].version,expression:"m.caseVersion == caseInfo.info[vIndex].version"}],staticClass:"message"},[s("a",{attrs:{href:"/user?target="+e.user.id}},[s("div",{staticClass:"owner-info"},[s("img",{staticClass:"owner-icon",attrs:{src:e.user.icon}}),t._v("\r\n\t\t\t\t\t"+t._s(e.user.profession)+" - "+t._s(e.user.name)+"\r\n\t\t\t\t")])]),t._v(" "),s("div",{staticClass:"message-content"},[t._v(t._s(e.message))]),t._v(" "),s("div",{staticClass:"sub-info"},[s("div",{staticClass:"info-item"},[t._v(t._s(e.time))]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.user&&e.user.id==t.user.id,expression:"user && m.user.id == user.id"}],staticClass:"action-bt",on:{click:function(e){return t.DeleteMessage(i)}}},[t._v("刪除")])])])}))],2):t._e(),t._v(" "),s("div",{staticClass:"slide-panel",class:{open:"InputUserInfo"==t.status}},[s("div",{staticClass:"input-area"},[s("div",{staticClass:"panel-title"},[t._v("請先輸入您的個人資訊")]),t._v(" "),s("user-info-editor",{ref:"userInfoEditor"})],1)]),t._v(" "),s("div",{staticClass:"slide-panel",class:{open:"ProvideSolution"==t.status}},[s("div",{staticClass:"panel-title",on:{click:function(e){t.status="ViewCase"}}},[t._v("提供解方")]),t._v(" "),s("solution-editor",{ref:"solutionEditor"})],1),t._v(" "),s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:"SolutionList"==t.status,expression:"status == 'SolutionList'"}],staticClass:"input-panel",on:{click:function(e){t.openSearchPanel=!1}}},[s("div",{staticClass:"input-area"},[s("div",{staticClass:"panel-title"},[t._v("解方列表")]),t._v(" "),s("div",{staticClass:"bt-container"},[s("div",{staticClass:"input-bt",on:{click:function(e){return t.ViewCase()}}},[t._v("觀看案例")]),t._v(" "),s("div",{staticClass:"input-bt",on:{click:function(e){e.stopPropagation(),t.openSearchPanel=!0}}},[t._v("搜尋解方")])]),t._v(" "),s("div",[s("solution-list",{ref:"solutionList"})],1)])])]),t._v(" "),s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:"ViewSolution"==t.status,expression:"status == 'ViewSolution'"}],staticClass:"input-panel"},[s("solution-view",{ref:"caseViewSolution"})],1)]),t._v(" "),s("div",{staticClass:"tab-bar"},[s("div",{staticClass:"tab-bt-container"},[s("div",{staticClass:"tab-bt",class:{on:"ViewCase"==t.status},on:{click:function(e){return t.ViewCase()}}},[t._v("觀看案例")]),t._v(" "),s("div",{staticClass:"tab-bt",class:{on:"ProvideSolution"==t.status},on:{click:function(e){return t.ProvideSolution()}}},[t._v("我要解題")]),t._v(" "),s("div",{staticClass:"tab-bt",class:{on:"ViewSolution"==t.status||"SolutionList"==t.status},on:{click:function(e){return t.ViewSolution(t.solutionID)}}},[t._v("觀看解方")])])]),t._v(" "),s("div",{staticClass:"side-panel",class:{open:t.openSearchPanel}},[t._m(0),t._v(" "),s("div",{staticClass:"search-container"},[s("div",{staticClass:"search-item"},[s("div",{staticClass:"search-label"},[t._v("排序")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.selectSort,expression:"selectSort"}],on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selectSort=e.target.multiple?s:s[0]},function(e){return t.SearchSolution()}]}},[s("option",{attrs:{value:"newest"}},[t._v("由新到舊")]),t._v(" "),s("option",{attrs:{value:"oldest"}},[t._v("由舊到新")]),t._v(" "),s("option",{attrs:{value:"likeNum"}},[t._v("最多讚")]),t._v(" "),s("option",{attrs:{value:"viewNum"}},[t._v("最多觀看")])])]),t._v(" "),s("div",{staticClass:"search-item"},[s("div",{staticClass:"search-label"},[t._v("解題者專業")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.selectProfession,expression:"selectProfession"}],on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selectProfession=e.target.multiple?s:s[0]},function(e){return t.SearchSolution()}]}},[s("option",{attrs:{value:"全部"}},[t._v("全部")]),t._v(" "),t._l(t.professions,(function(e){return s("option",{domProps:{value:e}},[t._v(t._s(e))])}))],2)]),t._v(" "),t.caseInfo?s("div",{staticClass:"search-item"},[s("div",{staticClass:"search-label"},[t._v("案例版本")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.selectVersion,expression:"selectVersion"}],on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selectVersion=e.target.multiple?s:s[0]},function(e){return t.SearchSolution()}]}},[s("option",{attrs:{value:"全部"}},[t._v("全部")]),t._v(" "),t._l(t.caseInfo.info,(function(e){return s("option",{domProps:{value:e.version}},[t._v(t._s(e.version))])}))],2)]):t._e(),t._v(" "),s("div",{staticClass:"search-item"},[s("div",{staticClass:"search-label"},[t._v("關鍵字")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],attrs:{type:"text",placeholder:"請輸入搜尋關鍵字"},domProps:{value:t.keyword},on:{change:function(e){return t.SearchSolution()},keyup:function(e){return e.type.indexOf("key")||13===e.keyCode?t.SearchSolution():null},input:function(e){e.target.composing||(t.keyword=e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"input-bt",on:{click:function(e){t.openSearchPanel=!1}}},[t._v("確定")]),t._v(" "),s("div",{staticClass:"input-bt",on:{click:function(e){return t.ResetCondition()}}},[t._v("重設")])])],2)};T._withStripped=!0;var O=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"solution-editor",on:{click:function(e){return e.target!==e.currentTarget?null:t.ViewCase()}}},[s("div",{staticClass:"step-page"},[s("div",{staticClass:"input-bt",on:{click:function(e){return t.ViewCase()}}},[t._v("觀看案例")]),t._v(" "),s("div",{staticClass:"step-bt-container"},[s("div",{staticClass:"tab-bt",class:{on:0==t.step},on:{click:function(e){t.step=0}}},[t._v("1.個案措施")]),t._v(" "),s("div",{staticClass:"tab-bt",class:{on:1==t.step},on:{click:function(e){t.step=1}}},[t._v("2.家屬協助")]),t._v(" "),s("div",{staticClass:"tab-bt",class:{on:2==t.step},on:{click:function(e){t.step=2}}},[t._v("3.專業連結")]),t._v(" "),s("div",{staticClass:"tab-bt",class:{on:3==t.step},on:{click:function(e){t.step=3}}},[t._v("4.服務設定")])]),t._v(" "),s("div",{staticClass:"quest",domProps:{innerHTML:t._s(t.quest[t.step])}}),t._v(" "),s("div",{staticClass:"separator"}),t._v(" "),s("div",{staticClass:"input-bt",on:{click:function(e){t.openInputPanel=!0}}},[t._v("新增項目")]),t._v(" "),s("div",{staticClass:"sol-container"},[0==t.step||1==t.step?s("div",t._l(t.priority,(function(e,i){return s("div",{staticClass:"problem-cat"},[s("div",{staticClass:"problem-header"},[t._v(t._s(e.name))]),t._v(" "),s("div",{staticClass:"problem-container"},t._l(t.solution[t.step][i],(function(e,a){return s("div",{staticClass:"problem-item one-third-w",class:"cat-D"+(i+1)},[s("div",{staticClass:"problem-title"},[t._v(t._s(t.intervention[e.intervention].name))]),t._v(" "),s("div",{staticClass:"problem-body"},[s("div",{staticClass:"problem-desc"},[t._v(t._s(e.desc))]),t._v(" "),s("div",{staticClass:"item-bt-container"},[s("div",{staticClass:"item-bt",on:{click:function(e){return t.ModifyItem(i,a)}}},[t._v("修改")]),t._v(" "),s("div",{staticClass:"item-bt",on:{click:function(e){return t.DeleteItem(i,a)}}},[t._v("刪除")])]),t._v(" "),s("div",{staticClass:"target-info"},[t._v("針對問題 - "+t._s(e.targetName))])])])})),0)])})),0):t._e(),t._v(" "),2==t.step?s("div",[s("div",{staticClass:"problem-cat"},[s("div",{staticClass:"problem-header"},[t._v("專業連結")]),t._v(" "),s("div",{staticClass:"problem-container"},t._l(t.solution[t.step][0],(function(e,i){return s("div",{staticClass:"problem-item one-third-w cat-D4"},[s("div",{staticClass:"problem-title"},[t._v(t._s(e.profession))]),t._v(" "),s("div",{staticClass:"problem-body"},[s("div",{staticClass:"problem-desc"},[t._v(t._s(e.desc))]),t._v(" "),s("div",{staticClass:"item-bt-container"},[s("div",{staticClass:"item-bt",on:{click:function(e){return t.ModifyItem(0,i)}}},[t._v("修改")]),t._v(" "),s("div",{staticClass:"item-bt",on:{click:function(e){return t.DeleteItem(0,i)}}},[t._v("刪除")])]),t._v(" "),s("div",{staticClass:"target-info"},[t._v("針對問題 - "+t._s(e.targetName))])])])})),0)])]):t._e(),t._v(" "),3==t.step?s("div",[s("div",{staticClass:"problem-cat"},[s("div",{staticClass:"problem-header"},[t._v("服務項目")]),t._v(" "),s("div",{staticClass:"problem-container"},t._l(t.solution[t.step][0],(function(e,i){return s("div",{staticClass:"problem-item one-third-w",class:"cat-"+e.category},[s("div",{staticClass:"problem-title"},[t._v(t._s(e.code)+" "+t._s(e.name))]),t._v(" "),s("div",{staticClass:"problem-body"},[s("div",{staticClass:"problem-desc"},[t._v(t._s(e.desc))]),t._v(" "),s("div",{staticClass:"item-bt-container"},[s("div",{staticClass:"item-bt",on:{click:function(e){return t.ModifyItem(0,i)}}},[t._v("修改")]),t._v(" "),s("div",{staticClass:"item-bt",on:{click:function(e){return t.DeleteItem(0,i)}}},[t._v("刪除")])]),t._v(" "),s("div",{staticClass:"target-info"},[t._v("針對問題 - "+t._s(e.targetName))])])])})),0)])]):t._e()]),t._v(" "),s("div",{staticClass:"separator"}),t._v(" "),s("div",{staticClass:"input-bt",on:{click:function(e){return t.SubmitSolution()}}},[t._v(t._s("edit"==t.action?"完成修改":"完成解題"))]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"edit"==t.action,expression:"action=='edit'"}],staticClass:"input-bt",on:{click:function(e){return t.ClearEditSolution(!0)}}},[t._v("取消修改")])]),t._v(" "),s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.openInputPanel,expression:"openInputPanel"}],staticClass:"input-panel full"},[s("div",{staticClass:"input-area"},[s("div",{staticClass:"quest",domProps:{innerHTML:t._s(t.quest[t.step])}}),t._v(" "),t.problemList?s("div",{staticClass:"input-item"},[s("div",{staticClass:"input-label"},[t._v("針對問題")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.targetIndex,expression:"targetIndex"}],on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.targetIndex=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:""}},[t._v("不指定")]),t._v(" "),t._l(t.problemList.D1,(function(e,i){return s("option",{domProps:{value:"D1-"+i}},[t._v(t._s(e.name))])})),t._v(" "),t._l(t.problemList.D2,(function(e,i){return s("option",{domProps:{value:"D2-"+i}},[t._v(t._s(e.name))])})),t._v(" "),t._l(t.problemList.D3,(function(e,i){return s("option",{domProps:{value:"D3-"+i}},[t._v(t._s(e.name))])})),t._v(" "),t._l(t.problemList.D4,(function(e,i){return s("option",{domProps:{value:"D4-"+i}},[t._v(t._s(e.name))])}))],2)]):t._e(),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0==t.step||1==t.step,expression:"step == 0 || step == 1"}]},[s("div",{staticClass:"input-item"},[s("div",{staticClass:"input-label"},[t._v("優先順序")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.selectPriority,expression:"selectPriority"}],on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selectPriority=e.target.multiple?s:s[0]}}},t._l(t.priority,(function(e,i){return s("option",{domProps:{value:i}},[t._v(t._s(e.name))])})),0)]),t._v(" "),s("div",{staticClass:"input-item"},[s("div",{staticClass:"input-label"},[t._v("措施")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.selectIntervention,expression:"selectIntervention"}],on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selectIntervention=e.target.multiple?s:s[0]}}},t._l(t.intervention,(function(e,i){return s("option",{domProps:{value:i}},[t._v(t._s(e.name))])})),0)])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:2==t.step,expression:"step == 2"}]},[s("div",{staticClass:"input-item"},[s("div",{staticClass:"input-label"},[t._v("專業連結")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.selectProfession,expression:"selectProfession"}],on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selectProfession=e.target.multiple?s:s[0]}}},t._l(t.professions,(function(e){return s("option",{domProps:{value:e}},[t._v(t._s(e))])})),0)]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"其他"==t.selectProfession,expression:"selectProfession=='其他'"}],staticClass:"input-item"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.customProfession,expression:"customProfession"}],attrs:{type:"text",placeholder:"請輸入您要連結的專業"},domProps:{value:t.customProfession},on:{input:function(e){e.target.composing||(t.customProfession=e.target.value)}}})])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:3==t.step,expression:"step == 3"}]},[s("care-service-selection",{ref:"serviceSelect"})],1),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.inputDesc,expression:"inputDesc"}],attrs:{placeholder:"請簡述您提供的措施"},domProps:{value:t.inputDesc},on:{input:function(e){e.target.composing||(t.inputDesc=e.target.value)}}}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.modify,expression:"!modify"}],staticClass:"input-bt",on:{click:function(e){return t.AddItem()}}},[t._v("新增")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.modify,expression:"!modify"}],staticClass:"input-bt",on:{click:function(e){return t.ClearTarget()}}},[t._v("取消")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.modify,expression:"modify"}],staticClass:"input-bt",on:{click:function(e){return t.DoModify()}}},[t._v("修改")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.modify,expression:"modify"}],staticClass:"input-bt",on:{click:function(e){return t.ClearModify()}}},[t._v("取消修改")])])])])],1)};O._withStripped=!0;s(0);var q={data:function(){return{action:"create",solutionID:null,quest:{},priority:{},intervention:{},professions:[],customProfession:"",solution:[{0:[],1:[],2:[]},{0:[],1:[],2:[]},{0:[]},{0:[]}],problemList:null,step:0,openInputPanel:!1,selectPriority:0,selectIntervention:0,selectProfession:"",inputDesc:"",targetIndex:"",modify:!1,modifyCategory:"",modifyIndex:-1,dirty:!1,serviceVersion:0}},components:{"care-service-selection":y},created:function(){$.get("/static/solution.json",function(t){this.quest=t.quest,this.priority=t.priority,this.intervention=t.intervention,this.professions=t.profession,this.selectProfession=this.professions[0]}.bind(this)),window.onbeforeunload=function(){if(this.dirty)return""}.bind(this)},methods:{SetProblem:function(t){this.problemList=t},EditSolution:function(t){$.get("/solution/view?solution="+t,function(e){if("ok"!=e.status)return alert("讀取解方失敗");this.solutionID=t,this.action="edit";var s=JSON.parse(e.data.info);this.serviceVersion=s.serviceVersion,this.solution=s.data,this.step=0}.bind(this))},ClearEditSolution:function(t){t&&this.$parent.ViewSolution(this.solutionID),this.solutionID=null,this.action="create",this.solution=[{0:[],1:[],2:[]},{0:[],1:[],2:[]},{0:[]},{0:[]}],this.step=0},AddSolutionForTarget:function(t,e){this.step=0,this.openInputPanel=!0,this.targetIndex=t+"-"+e},ClearTarget:function(){this.targetIndex="",this.openInputPanel=!1},GetTargetName:function(){if(""!=this.targetIndex){var t=this.targetIndex.split("-"),e=this.problemList[t[0]];return e?t[1]<0||t[1]>=e.length?"不指定":e[t[1]].name:"不指定"}return"不指定"},AddItem:function(){switch(this.dirty=!0,this.step){case 0:case 1:this.AddIntervention();break;case 2:this.AddProfession();break;case 3:this.AddService()}this.ClearTarget()},AddIntervention:function(){var t={};t.priority=this.selectPriority,t.intervention=this.selectIntervention,t.desc=this.inputDesc,t.targetIndex=this.targetIndex,t.targetName=this.GetTargetName(),this.inputDesc="",this.solution[this.step][this.selectPriority].push(t)},AddProfession:function(){var t={};"其他"==this.selectProfession?t.profession=this.customProfession:t.profession=this.selectProfession,t.targetIndex=this.targetIndex,t.targetName=this.GetTargetName(),t.desc=this.inputDesc,this.inputDesc="",this.solution[this.step][0].push(t)},AddService:function(){var t=this.$refs.serviceSelect.GetSelectItem();t.desc=this.inputDesc,t.targetIndex=this.targetIndex,t.targetName=this.GetTargetName(),this.inputDesc="",this.solution[this.step][0].push(t)},ModifyItem:function(t,e){this.modify=!0,this.modifyCategory=t,this.modifyIndex=e;var s=this.solution[this.step][t][e];switch(this.step){case 0:case 1:this.selectPriority=s.priority,this.selectIntervention=s.intervention;break;case 2:this.professions.includes(s.profession)?this.selectProfession=s.profession:(this.selectProfession="其他",this.customProfession=s.profession);break;case 3:this.$refs.serviceSelect.SetSelectItem(s)}this.targetIndex=s.targetIndex,this.inputDesc=s.desc,this.openInputPanel=!0},DeleteItem:function(t,e){if(confirm("確定刪除?")){var s=this.solution[this.step][t];if(!s||e<0||e>=s.length)return;s.splice(e,1)}},DoModify:function(){this.dirty=!0;var t={},e=!1;switch(this.step){case 0:case 1:t.priority=this.selectPriority,t.intervention=this.selectIntervention,this.selectPriority!=this.modifyCategory&&(e=!0);break;case 2:"其他"==this.selectProfession?t.profession=this.customProfession:t.profession=this.selectProfession;break;case 3:t=this.$refs.serviceSelect.GetSelectItem()}t.targetIndex=this.targetIndex,t.targetName=this.GetTargetName(),t.desc=this.inputDesc,e?(this.solution[this.step][this.modifyCategory].splice(this.modifyIndex,1),this.solution[this.step][this.selectPriority].push(t)):this.solution[this.step][this.modifyCategory][this.modifyIndex]=t,this.ClearModify()},ClearModify:function(){this.modify=!1,this.modifyCategory="",this.modifyIndex=-1,this.inputDesc="",this.openInputPanel=!1},SubmitSolution:function(){for(var t=[0,0,0,0],e=0;e<this.quest.length;e++)for(var s in this.solution[e])t[e]+=this.solution[e][s].length;if(0==t[0])return alert("請新增至少一個個案措施");var i="您的解方提供了\n";if(i+="個案措施 "+t[0]+" 項，",i+="家屬協助 "+t[1]+" 項，",i+="專業連結 "+t[2]+" 項，",i+="服務設定 "+t[3]+" 項\n",i+="確定送出?",confirm(i)){var a={},n=this.$parent.GetCaseInfo();a.caseID=n.caseID,a.caseVersion=n.caseVersion;var o={};o.data=this.solution,o.serviceVersion=this.$refs.serviceSelect.GetServiceCode().version,a.info=JSON.stringify(o);var r=$("meta[name='csrf-token']").attr("content");switch(this.dirty=!1,this.action){case"create":$.post("/solution/create",{data:a,_csrf:r},function(t){if("ok"!=t.status)return alert("新增解方失敗");alert("新增解方成功"),this.$parent.ViewSolution(t.data),this.ClearEditSolution()}.bind(this));break;case"edit":$.post("/solution/edit?solution="+this.solutionID,{data:a,_csrf:r},function(t){if("ok"!=t.status)return alert("修改解方失敗");alert("修改解方成功"),this.$parent.ViewSolution(t.data),this.ClearEditSolution()}.bind(this))}}},ViewCase:function(){this.$parent.ViewCase()}}},H=(s(25),r(q,O,[],!1,null,null,null));H.options.__file="src/vue/solution-editor.vue";var j=H.exports,Y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"solution-view"},[s("div",{staticClass:"panel-title"},[t._v("觀看解方")]),t._v(" "),t.solutionInfo&&t.curCaseVersion!=t.solutionInfo.caseVersion?s("p",{staticClass:"warning center"},[t._v("* 此為針對案例版本"+t._s(t.solutionInfo.caseVersion)+" 提出的解方，與目前觀看的案例版本"+t._s(t.curCaseVersion)+" 不同，參考時請小心。")]):t._e(),t._v(" "),t.solutionInfo?s("div",{staticClass:"feedback-statistic"},[s("div",{staticClass:"container clickable",on:{click:function(e){return t.ToggleLike()}}},[s("img",{staticClass:"feedback-icon",attrs:{src:"/static/image/like.png"}}),t._v(" "),s("div",{staticClass:"feedback-num"},[t._v(t._s(t.solutionInfo.likeNum))])]),t._v(" "),s("div",{staticClass:"container"},[t._v("\r\n\t\t\t觀看次數"),s("div",{staticClass:"feedback-num"},[t._v(t._s(t.solutionInfo.viewNum))]),t._v("\r\n\t\t\t案例版本"),s("div",{staticClass:"feedback-num"},[t._v(t._s(t.solutionInfo.caseVersion))])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isMySolution,expression:"isMySolution"}],staticClass:"container"},[s("div",{staticClass:"action-bt",on:{click:function(e){return t.ModifySolution()}}},[t._v("修改解方")]),t._v(" "),s("div",{staticClass:"action-bt",on:{click:function(e){return t.DeleteSolution()}}},[t._v("刪除解方")])])]):t._e(),t._v(" "),s("div",{staticClass:"input-bt",on:{click:function(e){return t.ViewCase()}}},[t._v("觀看案例")]),t._v(" "),s("div",{staticClass:"input-bt",on:{click:function(e){return t.BackToSolutionList()}}},[t._v("解方列表")]),t._v(" "),s("div",{staticClass:"step-bt-container"},[s("div",{staticClass:"tab-bt",class:{on:0==t.step},on:{click:function(e){t.step=0}}},[t._v("1.個案措施")]),t._v(" "),s("div",{staticClass:"tab-bt",class:{on:1==t.step},on:{click:function(e){t.step=1}}},[t._v("2.家屬協助")]),t._v(" "),s("div",{staticClass:"tab-bt",class:{on:2==t.step},on:{click:function(e){t.step=2}}},[t._v("3.專業連結")]),t._v(" "),s("div",{staticClass:"tab-bt",class:{on:3==t.step},on:{click:function(e){t.step=3}}},[t._v("4.服務設定")])]),t._v(" "),t.solutionInfo?s("div",[s("div",{staticClass:"quest",domProps:{innerHTML:t._s(t.quest[t.step])}}),t._v(" "),0==t.step||1==t.step?s("div",t._l(t.priority,(function(e,i){return s("div",{staticClass:"problem-cat"},[s("div",{staticClass:"problem-header"},[t._v(t._s(e.name))]),t._v(" "),s("div",{staticClass:"problem-container"},t._l(t.solutionInfo.info[t.step][i],(function(e,a){return s("div",{staticClass:"problem-item one-third-w",class:"cat-D"+(i+1)},[s("div",{staticClass:"problem-title"},[t._v(t._s(t.intervention[e.intervention].name))]),t._v(" "),s("div",{staticClass:"problem-body"},[s("div",{staticClass:"problem-desc"},[t._v(t._s(e.desc))])]),t._v(" "),s("div",{staticClass:"target-info"},[t._v("針對問題 - "+t._s(e.targetName))])])})),0)])})),0):t._e(),t._v(" "),2==t.step?s("div",[s("div",{staticClass:"problem-cat"},[s("div",{staticClass:"problem-header"},[t._v("專業連結")]),t._v(" "),s("div",{staticClass:"problem-container"},t._l(t.solutionInfo.info[t.step][0],(function(e,i){return s("div",{staticClass:"problem-item one-third-w cat-D4"},[s("div",{staticClass:"problem-title"},[t._v(t._s(e.profession))]),t._v(" "),s("div",{staticClass:"problem-body"},[s("div",{staticClass:"problem-desc"},[t._v(t._s(e.desc))]),t._v(" "),s("div",{staticClass:"item-bt-container"},[s("div",{staticClass:"item-bt",on:{click:function(s){return t.SearchProfession(e.profession)}}},[t._v("找人")])])]),t._v(" "),s("div",{staticClass:"target-info"},[t._v("針對問題 - "+t._s(e.targetName))])])})),0)])]):t._e(),t._v(" "),3==t.step?s("div",[s("div",{staticClass:"problem-cat"},[s("div",{staticClass:"problem-header"},[t._v("\r\n\t\t\t\t\t服務項目\r\n\t\t\t\t\t"),s("div",{staticClass:"input-bt",on:{click:function(e){return t.CalculateService()}}},[t._v("價格試算")])]),t._v(" "),s("div",{staticClass:"problem-container"},t._l(t.solutionInfo.info[t.step][0],(function(e,i){return s("div",{staticClass:"problem-item one-third-w",class:"cat-"+e.category},[s("div",{staticClass:"problem-title"},[t._v(t._s(e.code)+" "+t._s(e.name))]),t._v(" "),s("div",{staticClass:"problem-body"},[s("div",{staticClass:"problem-desc"},[t._v(t._s(e.desc))])]),t._v(" "),s("div",{staticClass:"target-info"},[t._v("針對問題 - "+t._s(e.targetName))])])})),0)])]):t._e()]):t._e(),t._v(" "),s("div",{staticClass:"separator"}),t._v(" "),s("div",{staticClass:"solution-title"},[t._v("分享者簡介")]),t._v(" "),t.solutionInfo?s("div",{staticClass:"owner"},[s("a",{attrs:{href:"/user?target="+t.solutionInfo.user.id}},[s("div",{staticClass:"owner-info"},[s("img",{staticClass:"owner-icon",attrs:{src:t.solutionInfo.user.icon}}),t._v("\r\n\t\t\t\t"+t._s(t.solutionInfo.user.profession)+" - "+t._s(t.solutionInfo.user.name)+"\r\n\t\t\t")])]),t._v(" "),s("div",{staticClass:"owner-desc"},[t._v(t._s(t.solutionInfo.user.desc))])]):t._e(),t._v(" "),s("div",{staticClass:"solution-title"},[t._v("留言回饋")]),t._v(" "),s("div",{staticClass:"message-box"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.sendMessage,expression:"sendMessage"}],attrs:{placeholder:"留言給分享者..."},domProps:{value:t.sendMessage},on:{input:function(e){e.target.composing||(t.sendMessage=e.target.value)}}}),t._v(" "),s("div",{staticClass:"bt-container"},[s("div",{staticClass:"bt",on:{click:function(e){return t.SendMessage()}}},[t._v("送出")])])]),t._v(" "),t.solutionInfo?s("div",{staticClass:"message-list"},[s("a",{attrs:{name:"solMessageList"}}),t._v(" "),t._l(t.messageList,(function(e,i){return s("div",{staticClass:"message"},[s("a",{attrs:{href:"/user?target="+e.user.id}},[s("div",{staticClass:"owner-info"},[s("img",{staticClass:"owner-icon",attrs:{src:e.user.icon}}),t._v("\r\n\t\t\t\t\t"+t._s(e.user.profession)+" - "+t._s(e.user.name)+"\r\n\t\t\t\t")])]),t._v(" "),s("div",{staticClass:"message-content"},[t._v(t._s(e.message))]),t._v(" "),s("div",{staticClass:"sub-info"},[s("div",{staticClass:"info-item"},[t._v(t._s(e.time))]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.user&&e.user.id==t.user.id,expression:"user && m.user.id == user.id"}],staticClass:"action-bt",on:{click:function(e){return t.DeleteMessage(i)}}},[t._v("刪除")])])])}))],2):t._e()])};Y._withStripped=!0;s(0);var z={data:function(){return{quest:[],priority:[],intervention:[],user:null,isMySolution:!1,isLike:!1,solutionInfo:null,sendMessage:"",messageList:[],solutionID:null,curCaseVersion:1,step:0}},created:function(){$.get("/static/solution.json",function(t){this.quest=t.quest,this.priority=t.priority,this.intervention=t.intervention}.bind(this))},methods:{SetUser:function(t){this.user=t,this.solutionInfo&&(this.isMySolution=t.id==this.solutionInfo.ownerID)},BackToSolutionList:function(){this.$parent.ViewSolution()},ViewCase:function(){this.$parent.ViewCase()},ModifySolution:function(){this.$parent.ProvideSolution(this.solutionInfo.id)},DeleteSolution:function(){if(confirm("確定刪除解方?")){var t=$("meta[name='csrf-token']").attr("content");$.post("/solution/delete?solution="+this.solutionInfo.id+"&case="+this.solutionInfo.caseID+"&_csrf="+t,function(t){if("ok"==t.status)alert("解方已刪除"),this.BackToSolutionList();else switch(t.message){case"msgNum not zero":alert("無法刪除已有留言的解方");break;case"likeNum not zero":alert("無法刪除已被按讚的解方");break;default:alert("無法刪除解方")}}.bind(this))}},LoadSolution:function(t){$.get("/solution/view?solution="+t,function(t){if("ok"!=t.status)return alert("無法讀取解方");this.solutionInfo=t.data;var e=JSON.parse(this.solutionInfo.info);this.solutionInfo.serviceVersion=e.serviceVersion,this.solutionInfo.info=e.data,this.isMySolution=!1,t.data.liked&&(this.isLike=!0),this.user&&(this.isMySolution=this.user.id==this.solutionInfo.ownerID)}.bind(this)),$.get("/solution/message/list?solution="+t,function(t){if("ok"!=t.status)return alert("無法讀取留言");for(var e=0;e<t.data.length;e++){var s=moment(t.data[e].createdAt).tz("Asia/Taipei");t.data[e].time=s.format("YYYY-MM-DD HH:mm")}this.messageList=t.data}.bind(this))},SetCurCaseVersion:function(t){this.curCaseVersion=t},SendMessage:function(){var t={};t.solutionID=this.solutionInfo.id,t.message=this.sendMessage;var e=$("meta[name='csrf-token']").attr("content");t._csrf=e,$.post("/solution/message/create",t,function(t){if("ok"!=t.status)return alert("新增留言失敗");var e=moment(t.data.createdAt).tz("Asia/Taipei");t.data.time=e.format("YYYY-MM-DD HH:mm"),t.data.user=this.user,this.messageList.splice(0,0,t.data),this.sendMessage="",this.$root.ShowMessage("新增留言成功")}.bind(this))},DeleteMessage:function(t){if(confirm("確定刪除留言?")){var e={};e.message=this.messageList[t].id,e.solution=this.solutionInfo.id;var s=$("meta[name='csrf-token']").attr("content");e._csrf=s,$.post("/solution/message/delete",e,function(e){if("ok"!=e.status)return alert("刪除留言失敗");this.messageList.splice(t,1)}.bind(this))}},ToggleLike:function(){if(!this.user){var t=encodeURIComponent("/case?case="+this.caseInfo.id);return window.location.href="/auth/login?intentUrl="+t}var e={};e.solutionID=this.solutionInfo.id,e.ownerID=this.user.id;var s=$("meta[name='csrf-token']").attr("content");e._csrf=s,this.isLike?confirm("您已按過讚，要將按讚取消?")&&$.post("/solution/like/delete",e,function(t){if("ok"!=t.status)return alert("按讚失敗");this.isLike=!1,this.solutionInfo.likeNum--}.bind(this)):$.post("/solution/like/create",e,function(t){if("ok"!=t.status)return alert("按讚失敗");this.isLike=!0,this.solutionInfo.likeNum++}.bind(this))},SearchProfession:function(t){window.open("/profession?profession="+t)},CalculateService:function(){window.open("/calculator?solution="+this.solutionInfo.id)}}},X=(s(26),r(z,Y,[],!1,null,null,null));X.options.__file="src/vue/solution-view.vue";var J=X.exports,Z=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{directives:[{name:"show",rawName:"v-show",value:0==t.solutionList.length,expression:"solutionList.length==0"}],staticClass:"no-result-box"},[t._v("\r\n\t\t目前暫無符合條件的解方\r\n\t\t"),0==t.emptyAction?s("div",{staticClass:"center-bt"},[t._v("查無資料")]):s("div",{staticClass:"center-bt",on:{click:function(e){return t.CreateSolution()}}},[t._v("新增解方")])]),t._v(" "),s("div",{staticClass:"solution-list"},[s("transition-group",{staticStyle:{width:"100%"},attrs:{name:"create"}},t._l(t.solutionList,(function(e,i){return s("div",{key:e.id,staticClass:"list-item one-third-w shadow-dark",on:{click:function(s){return t.ViewSolution(e.caseID,e.id)}}},[s("div",{staticClass:"owner-info",style:{"background-color":e.user.headColor}},[s("img",{staticClass:"owner-icon",attrs:{src:e.user.icon}}),t._v("\r\n\t\t\t\t\t"+t._s(e.user.profession)+" - "+t._s(e.user.name)+"\r\n\t\t\t\t")]),t._v(" "),s("div",{staticClass:"domain-statistic"},[s("div",{staticClass:"domain-info"},[s("div",{staticClass:"domain-icon cat-D1"}),t._v(" "),s("div",{staticClass:"tip cat-D1"},[t._v("個案措施 "+t._s(e.S1Num||0)+" 項")]),t._v(" "),s("div",{staticClass:"domain-num"},[t._v(t._s(e.S1Num||0))])]),t._v(" "),s("div",{staticClass:"domain-info"},[s("div",{staticClass:"domain-icon cat-D2"}),t._v(" "),s("div",{staticClass:"tip cat-D2"},[t._v("家屬措施 "+t._s(e.S2Num||0)+" 項")]),t._v(" "),s("div",{staticClass:"domain-num"},[t._v(t._s(e.S2Num||0))])]),t._v(" "),s("div",{staticClass:"domain-info"},[s("div",{staticClass:"domain-icon cat-D3"}),t._v(" "),s("div",{staticClass:"tip cat-D3"},[t._v("專業連結 "+t._s(e.S3Num||0)+" 項")]),t._v(" "),s("div",{staticClass:"domain-num"},[t._v(t._s(e.S3Num||0))])]),t._v(" "),s("div",{staticClass:"domain-info"},[s("div",{staticClass:"domain-icon cat-D4"}),t._v(" "),s("div",{staticClass:"tip cat-D4"},[t._v("照護服務 "+t._s(e.S4Num||0)+" 項")]),t._v(" "),s("div",{staticClass:"domain-num"},[t._v(t._s(e.S4Num||0))])])]),t._v(" "),s("div",{staticClass:"desc"},[t._v(t._s(e.desc))]),t._v(" "),s("div",{staticClass:"feedback-statistic"},[s("img",{staticClass:"feedback-icon",attrs:{src:"/static/image/like.png"}}),t._v(" "),s("div",{staticClass:"feedback-num"},[t._v(t._s(e.likeNum))]),t._v(" "),s("div",{staticClass:"feedback-num"},[t._v("觀看次數 "+t._s(e.viewNum))])])])})),0)],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0==t.noMore,expression:"noMore==false"}],staticClass:"load-more",on:{click:function(e){return t.LoadMoreList()}}},[t._v("更多解方 ▼")])])};Z._withStripped=!0;var W=s(0),K={props:["init","emptyAction"],data:function(){return{solutionList:[],preLoad:[],page:0,param:{},noMore:!1}},created:function(){"1"==this.init&&this.LoadMoreList()},methods:{InitHeadColor:function(){for(var t=W.ColorCategory(30,.9),e=0;e<this.solutionList.length;e++){var s=this.solutionList[e].user.profession,i=W.StrCodeToInt(s)%30;this.solutionList[e].user.headColor=t(i)}},SetParam:function(t){this.param=t},ClearList:function(){this.page=0,this.solutionList=[],this.preLoad=[],this.noMore=!1},PreLoadList:function(t){if(this.param){var e="/solution/list?page="+this.page;this.param.caseID&&(e+="&case="+this.param.caseID),this.param.ownerID&&(e+="&owner="+this.param.ownerID),this.param.profession&&(e+="&profession="+this.param.profession),this.param.keyword&&(e+="&keyword="+this.param.keyword),this.param.caseVersion&&(e+="&caseVersion="+this.param.caseVersion),e+="&sort="+this.param.sort||!1,$.get(e,function(e){return this.preLoad=e.data,"ok"!=e.status?alert("讀取案例列表失敗"):0==this.preLoad.length?this.noMore=!0:(this.page++,void(t&&t()))}.bind(this))}},LoadMoreList:function(t){if(t&&(this.param=t),0==this.preLoad.length)return this.PreLoadList(this.LoadMoreList);for(var e=0;e<this.preLoad.length;e++){this.preLoad[e].info=JSON.parse(this.preLoad[e].info).data;for(var s="",i=0;i<this.preLoad[e].info.length;i++){var a=this.preLoad[e].info[i],n=0;for(var o in a)n+=a[o].length,""==s&&a[o].length>0&&(s+=a[o][0].desc);this.preLoad[e]["S"+(i+1)+"Num"]=n}this.preLoad[e].desc=s}this.solutionList.push.apply(this.solutionList,this.preLoad),this.PreLoadList(),this.InitHeadColor()},ViewSolution:function(t,e){if(this.$parent.ViewSolution)return this.$parent.ViewSolution(e);window.location.href="/case?case="+t+"&solution="+e},CreateSolution:function(){if(this.$parent.ProvideSolution)return this.$parent.ProvideSolution()}}},Q=(s(27),r(K,Z,[],!1,null,null,null));Q.options.__file="src/vue/solution-list.vue";var tt=Q.exports,et=s(0),st={data:function(){return{user:null,isMyCase:!1,isLike:!1,omaha:null,caseInfo:null,vIndex:0,problem:{D1:[],D2:[],D3:[],D4:[]},sendMessage:"",messageList:[],status:"ViewCase",solutionID:null,professions:[],openSearchPanel:!1,selectProfession:"全部",selectSort:"newest",selectVersion:"全部",keyword:""}},components:{"user-info-editor":U,"solution-editor":j,"solution-view":J,"solution-list":tt},created:function(){var t=et.GetUrlParameter(),e=t.case,s=t.solution;e||(window.location.href="/?message=無此案例"),$.get("/case/view?case="+e,function(t){if("ok"!=t.status)return window.location.href="/?message=無法讀取案例";$("meta[name='description']").attr("content",t.data.desc),$("meta[property='og:description']").attr("content",t.data.desc),this.caseInfo=t.data,this.caseInfo.info=JSON.parse(this.caseInfo.info),this.vIndex=this.caseInfo.info.length-1,this.isMyCase=!1,t.data.liked&&(this.isLike=!0),this.user&&(this.isMyCase=this.user.id==this.caseInfo.ownerID),this.UpdateVersion(),s&&this.ViewSolution(s),$.get("/static/omaha.json",function(t){this.omaha=t}.bind(this)),$.get("/static/solution.json",function(t){this.professions=t.profession}.bind(this))}.bind(this)),$.get("/case/message/list?case="+e,function(t){if("ok"!=t.status)return alert("無法讀取留言");for(var e=0;e<t.data.length;e++){var s=moment(t.data[e].createdAt).tz("Asia/Taipei");t.data[e].time=s.format("YYYY-MM-DD HH:mm")}this.messageList=t.data}.bind(this))},methods:{SetUser:function(t){this.user=t,this.caseInfo&&(this.isMyCase=t.id==this.caseInfo.ownerID),this.$refs.caseViewSolution&&this.$refs.caseViewSolution.SetUser(t)},UpdateVersion:function(){this.problem={D1:[],D2:[],D3:[],D4:[]};var t=this.caseInfo.info[this.vIndex].problem;t.D1&&(this.problem.D1=t.D1),t.D2&&(this.problem.D2=t.D2),t.D3&&(this.problem.D3=t.D3),t.D4&&(this.problem.D4=t.D4);var e=this.caseInfo.info[this.vIndex].version;this.$refs.caseViewSolution.SetCurCaseVersion(e)},GetCaseInfo:function(){var t={};return t.caseID=this.caseInfo.id,t.caseVersion=this.caseInfo.info[this.vIndex].version,t},ModifyCase:function(){window.location.href="/case/edit?case="+this.caseInfo.id},DeleteCase:function(){if(confirm("確定刪除案例?")){var t=$("meta[name='csrf-token']").attr("content");$.post("/case/delete?case="+this.caseInfo.id+"&_csrf="+t,(function(t){if("ok"!=t.status)switch(t.message){case"solNum not zero":return alert("無法刪除已有解決方案的案例");case"msgNum not zero":return alert("無法刪除已有留言的案例");case"likeNum not zero":return alert("無法刪除已被按讚的案例");default:return alert("案例刪除失敗")}else window.location.href="/?message="+encodeURIComponent("案例刪除成功")}))}},RandomCase:function(){window.location.href="/case/random"},SendMessage:function(){var t={};t.caseID=this.caseInfo.id,t.caseVersion=this.caseInfo.info[this.vIndex].version,t.message=this.sendMessage;var e=$("meta[name='csrf-token']").attr("content");t._csrf=e,$.post("/case/message/create",t,function(t){if("ok"!=t.status)return alert("新增留言失敗");var e=moment(t.data.createdAt).tz("Asia/Taipei");t.data.time=e.format("YYYY-MM-DD HH:mm"),t.data.user=this.user,this.messageList.splice(0,0,t.data),this.sendMessage="",et.GoToAnchor("messageList"),this.$root.ShowMessage("新增留言成功")}.bind(this))},DeleteMessage:function(t){if(confirm("確定刪除留言?")){var e={};e.message=this.messageList[t].id,e.case=this.caseInfo.id;var s=$("meta[name='csrf-token']").attr("content");e._csrf=s,$.post("/case/message/delete",e,function(e){if("ok"!=e.status)return alert("刪除留言失敗");this.messageList.splice(t,1)}.bind(this))}},ToggleLike:function(){if(!this.user){var t=encodeURIComponent("/case?case="+this.caseInfo.id);return window.location.href="/auth/login?intentUrl="+t}var e={};e.caseID=this.caseInfo.id,e.ownerID=this.user.id;var s=$("meta[name='csrf-token']").attr("content");e._csrf=s,this.isLike?confirm("您已按過讚，要將按讚取消?")&&$.post("/case/like/delete",e,function(t){if("ok"!=t.status)return alert("按讚失敗");this.isLike=!1,this.caseInfo.likeNum--}.bind(this)):$.post("/case/like/create",e,function(t){if("ok"!=t.status)return alert("按讚失敗");this.isLike=!0,this.caseInfo.likeNum++}.bind(this))},ViewCase:function(){this.status="ViewCase",this.openSearchPanel=!1},ProvideSolution:function(t){if(!this.user){var e=encodeURIComponent("/case?case="+this.caseInfo.id);return window.location.href="/auth/login?intentUrl="+e}if(!this.user.profession)return this.status="InputUserInfo",this.$refs.userInfoEditor.submitCallback=function(e){this.ProvideSolution(t)}.bind(this),this.$refs.userInfoEditor.SetUser(this.user);t&&this.$refs.solutionEditor.EditSolution(t),this.status="ProvideSolution",this.openSearchPanel=!1,this.$refs.solutionEditor.SetProblem(this.problem)},ViewSolution:function(t){this.solutionID=t,t?(this.status="ViewSolution",this.$refs.caseViewSolution.LoadSolution(t)):(this.status="SolutionList",this.SearchSolution()),this.openSearchPanel=!1},OpenSolutionPanel:function(t,e){this.ProvideSolution(),this.$refs.solutionEditor.AddSolutionForTarget(t,e)},GetProblem:function(t,e){return this.problem[t]?e<0||e>=this.problem[t].length?null:this.problem[t][e]:null},SearchSolution:function(){var t={};t.caseID=this.caseInfo.id,""!=this.keyword&&(t.keyword=this.keyword),"全部"!=this.selectProfession&&(t.profession=this.selectProfession),t.sort=this.selectSort,"全部"!=this.selectVersion&&(t.caseVersion=this.selectVersion),this.$refs.solutionList.ClearList(),this.$refs.solutionList.LoadMoreList(t)},ResetCondition:function(){this.keyword="",this.selectSort="newest",this.selectProfession="全部",this.SearchSolution()}}},it=(s(28),r(st,T,[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mid-title"},[this._v("\r\n\t\t\t搜尋條件\r\n\t\t\t"),e("div",{staticClass:"bottom-line"})])}],!1,null,null,null));it.options.__file="src/vue/case-view.vue";var at=it.exports,nt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"user-view"},[s("div",{staticClass:"feedback-statistic"},[s("div",{staticClass:"container"},[t._v("\r\n\t\t\t案例數"),s("div",{staticClass:"feedback-num"},[t._v(t._s(t.target.caseNum))])]),t._v(" "),s("div",{staticClass:"container"},[t._v("\r\n\t\t\t解方數"),s("div",{staticClass:"feedback-num"},[t._v(t._s(t.target.solNum))])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isMyAccount,expression:"isMyAccount"}],staticClass:"container"},[s("div",{staticClass:"action-bt",on:{click:function(e){t.setupUserInfo=!0}}},[t._v("修改資訊")])])]),t._v(" "),s("div",{staticClass:"user-box"},[s("img",{staticClass:"user-photo",attrs:{src:t.target.photo}}),t._v(" "),s("div",{staticClass:"user-info"},[s("div",{staticClass:"info-head"},[t._v(t._s(t.target.profession)+" - "+t._s(t.target.name))]),t._v(" "),s("div",{staticClass:"info-desc"},[t._v(t._s(t.target.desc))])])]),t._v(" "),s("div",{staticClass:"sub-title"},[t._v("聯絡資訊")]),t._v(" "),s("div",{staticClass:"contact-box"},[s("ul",[s("li",[s("div",{staticClass:"contact-item"},[t._v("服務縣市：")]),t._v(" "),s("div",{staticClass:"contact-info"},[t._v(t._s(t.target.county||"未提供"))])]),t._v(" "),s("li",[s("div",{staticClass:"contact-item"},[t._v("公司或組織名稱：")]),t._v(" "),s("div",{staticClass:"contact-info"},[t.target.company?s("div",[s("a",{attrs:{href:"https://www.google.com/search?q="+t.target.company,target:"_blank"}},[t._v(t._s(t.target.company))])]):s("div",[t._v("\r\n\t\t\t\t\t\t"+t._s(t.target.company||"未提供")+"\r\n\t\t\t\t\t")])])]),t._v(" "),s("li",[s("div",{staticClass:"contact-item"},[t._v("服務聯絡信箱：")]),t._v(" "),s("div",{staticClass:"contact-info"},[t._v(t._s(t.target.contactEmail||"未提供"))])]),t._v(" "),s("li",[s("div",{staticClass:"contact-item"},[t._v("服務聯絡電話：")]),t._v(" "),s("div",{staticClass:"contact-info"},[t._v(t._s(t.target.tel||"未提供"))])])])]),t._v(" "),s("div",{staticClass:"separator"}),t._v(" "),s("div",{staticClass:"sub-title"},[t._v("案例列表")]),t._v(" "),s("case-list",{ref:"caseList",attrs:{emptyAction:"0"}}),t._v(" "),s("div",{staticClass:"sub-title"},[t._v("解方列表")]),t._v(" "),s("solution-list",{ref:"solutionList",attrs:{emptyAction:"0"}}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isMyAccount,expression:"isMyAccount"}],staticClass:"tab-bar"},[s("div",{staticClass:"tab-bt-container"},[s("div",{staticClass:"tab-bt",on:{click:function(e){t.setupUserInfo=!0}}},[t._v("修改資訊")]),t._v(" "),s("div",{staticClass:"tab-bt",on:{click:function(e){return t.OpenPhotoSelect()}}},[t._v("變更圖片")]),t._v(" "),s("div",{staticClass:"tab-bt",on:{click:function(e){return t.Logout()}}},[t._v("登出")])])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isMyAccount,expression:"isMyAccount"}],staticClass:"slide-panel",class:{open:t.setupUserInfo}},[s("div",{staticClass:"input-area"},[s("div",{staticClass:"close-bt",on:{click:function(e){t.setupUserInfo=!1}}},[t._v("X")]),t._v(" "),s("div",{staticClass:"panel-title"},[t._v("修改資訊")]),t._v(" "),s("user-info-editor",{ref:"userInfoEditor"})],1)])],1)};nt._withStripped=!0;var ot=s(0),rt={data:function(){return{user:{},target:{},isMyAccount:!1,setupUserInfo:!1}},components:{"case-list":l,"solution-list":tt,"user-info-editor":U},created:function(){var t=ot.GetUrlParameter().target;t||(window.location.href="/?message=無此使用者"),$.get("/user/info?user="+t,function(e){"ok"!=e.status&&(window.location.href="/?message=使用者查詢失敗"),this.target=e.data,this.$refs.caseList.LoadMoreList({ownerID:t}),this.$refs.solutionList.LoadMoreList({ownerID:t}),this.user.id==this.target.id&&(this.isMyAccount=!0)}.bind(this))},methods:{SetUser:function(t){this.user=t,t.id==this.target.id&&(this.isMyAccount=!0),this.$refs.userInfoEditor.SetUser(t)},OpenPhotoSelect:function(){this.$refs.userInfoEditor.ChangePhoto()},ChangeUserPhoto:function(t){this.isMyAccount&&(this.user.photo=t.photo,this.user.icon=t.icon,this.target.photo=t.photo,this.target.icon=t.icon)},UpdateUserInfo:function(t){this.isMyAccount&&(this.user=t,this.target=t,this.setupUserInfo=!1)},Logout:function(){this.isMyAccount&&confirm("確定登出?")&&(window.location.href="/auth/logout")}}},ct=(s(29),r(rt,nt,[],!1,null,null,null));ct.options.__file="src/vue/user-view.vue";var lt=ct.exports,vt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"profession"},[s("div",{staticClass:"bt-bar"},[s("div",{staticClass:"action-bt",on:{click:function(e){t.openSearchPanel=!0}}},[t._v("搜尋專家")])]),t._v(" "),s("div",{on:{click:function(e){t.openSearchPanel=!1}}},[t._m(0),t._v(" "),s("user-list",{ref:"userList",attrs:{init:"1"}})],1),t._v(" "),s("div",{staticClass:"tab-bar"},[s("div",{staticClass:"tab-bt-container"},[s("div",{staticClass:"tab-bt",on:{click:function(e){t.openSearchPanel=!0}}},[t._v("搜尋專家")])])]),t._v(" "),s("div",{staticClass:"side-panel",class:{open:t.openSearchPanel}},[t._m(1),t._v(" "),s("div",{staticClass:"search-container"},[s("div",{staticClass:"search-item"},[s("div",{staticClass:"search-label canNotEmpty"},[t._v("服務專業")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.selectProfession,expression:"selectProfession"}],on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selectProfession=e.target.multiple?s:s[0]},function(e){return t.SearchProfession()}]}},[s("option",{attrs:{value:"全部"}},[t._v("全部")]),t._v(" "),t._l(t.professions,(function(e){return s("option",{domProps:{value:e}},[t._v(t._s(e))])}))],2)]),t._v(" "),s("div",{staticClass:"search-item"},[s("div",{staticClass:"search-label"},[t._v("服務縣市")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.selectCounty,expression:"selectCounty"}],on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selectCounty=e.target.multiple?s:s[0]},function(e){return t.SearchProfession()}]}},[s("option",{attrs:{value:"全部"}},[t._v("全部")]),t._v(" "),t._l(t.counties,(function(e){return s("option",{domProps:{value:e}},[t._v(t._s(e))])}))],2)]),t._v(" "),s("div",{staticClass:"search-item"},[s("div",{staticClass:"search-label"},[t._v("排序")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.selectSort,expression:"selectSort"}],on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selectSort=e.target.multiple?s:s[0]},function(e){return t.SearchProfession()}]}},[s("option",{attrs:{value:"caseNum"}},[t._v("最多案例")]),t._v(" "),s("option",{attrs:{value:"solNum"}},[t._v("最多解方")]),t._v(" "),s("option",{attrs:{value:"newest"}},[t._v("由新到舊")]),t._v(" "),s("option",{attrs:{value:"oldest"}},[t._v("由舊到新")])])]),t._v(" "),s("div",{staticClass:"search-item"},[s("div",{staticClass:"search-label"},[t._v("關鍵字")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],attrs:{type:"text",placeholder:"請輸入搜尋關鍵字"},domProps:{value:t.keyword},on:{change:function(e){return t.SearchProfession()},keyup:function(e){return e.type.indexOf("key")||13===e.keyCode?t.SearchProfession():null},input:function(e){e.target.composing||(t.keyword=e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"input-bt",on:{click:function(e){t.openSearchPanel=!1}}},[t._v("確定")]),t._v(" "),s("div",{staticClass:"input-bt",on:{click:function(e){return t.ResetCondition()}}},[t._v("重設")])])])])};vt._withStripped=!0;var ut=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{directives:[{name:"show",rawName:"v-show",value:0==t.userList.length,expression:"userList.length==0"}],staticClass:"no-result-box"},[t._v("\r\n\t\t目前暫無符合條件的專家\r\n\t\t"),s("div",{staticClass:"center-bt",on:{click:function(e){return t.ResetCondition()}}},[t._v("重設條件")])]),t._v(" "),s("div",{staticClass:"user-list"},[s("transition-group",{staticStyle:{width:"100%"},attrs:{name:"create"}},t._l(t.userList,(function(e,i){return s("div",{key:e.id,staticClass:"list-item one-third-w shadow-light"},[s("a",{attrs:{href:"/user?target="+e.id}},[s("div",{staticClass:"owner-info",style:{"background-color":e.headColor}},[s("img",{staticClass:"owner-icon",attrs:{src:e.icon}}),t._v("\r\n\t\t\t\t\t\t"+t._s(e.profession)+" - "+t._s(e.name)+"\r\n\t\t\t\t\t")]),t._v(" "),s("div",{staticClass:"domain-statistic"},[s("div",{staticClass:"domain-info"},[s("div",{staticClass:"domain-icon cat-D1"}),t._v(" "),s("div",{staticClass:"tip cat-D1"},[t._v("案例數 "+t._s(e.caseNum))]),t._v(" "),s("div",{staticClass:"domain-num"},[t._v(t._s(e.caseNum))])]),t._v(" "),s("div",{staticClass:"domain-info"},[s("div",{staticClass:"domain-icon cat-D2"}),t._v(" "),s("div",{staticClass:"tip cat-D2"},[t._v("解方數 "+t._s(e.solNum))]),t._v(" "),s("div",{staticClass:"domain-num"},[t._v(t._s(e.solNum))])])]),t._v(" "),s("div",{staticClass:"desc"},[t._v(t._s(e.desc))]),t._v(" "),s("div",{staticClass:"feedback-statistic"},[s("div",{staticClass:"feedback-num"},[t._v(t._s(e.county)+" - "+t._s(e.company))])])])])})),0)],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0==t.noMore,expression:"noMore==false"}],staticClass:"load-more",on:{click:function(e){return t.LoadMoreList()}}},[t._v("更多專家 ▼")])])};ut._withStripped=!0;var dt=s(0),mt={props:["init"],data:function(){return{userList:[],preLoad:[],page:0,param:{},noMore:!1}},created:function(){if("1"==this.init){var t=dt.GetUrlParameter().profession;this.LoadMoreList({profession:t})}},methods:{InitHeadColor:function(){for(var t=dt.ColorCategory(30,.9),e=0;e<this.userList.length;e++){var s=this.userList[e].profession,i=dt.StrCodeToInt(s)%30;this.userList[e].headColor=t(i)}},SetParam:function(t){this.param=t},ClearList:function(){this.page=0,this.userList=[],this.preLoad=[],this.noMore=!1},PreLoadList:function(t){if(this.param){var e="/user/list?page="+this.page;this.param.profession&&(e+="&profession="+this.param.profession),this.param.county&&(e+="&county="+this.param.county),this.param.keyword&&(e+="&keyword="+this.param.keyword),e+="&sort="+this.param.sort||!1,$.get(e,function(e){return this.preLoad=e.data,"ok"!=e.status?alert("讀取專家列表失敗"):0==this.preLoad.length?this.noMore=!0:(this.page++,void(t&&t()))}.bind(this))}},LoadMoreList:function(t){if(t&&(this.param=t),0==this.preLoad.length)return this.PreLoadList(this.LoadMoreList);this.userList.push.apply(this.userList,this.preLoad),this.PreLoadList(),this.InitHeadColor()},ResetCondition:function(){this.$parent.ResetCondition&&this.$parent.ResetCondition()}}},pt=(s(30),r(mt,ut,[],!1,null,null,null));pt.options.__file="src/vue/user-list.vue";var ht=pt.exports,ft=s(0),_t={props:["init"],data:function(){return{openSearchPanel:!1,selectProfession:"全部",selectCounty:"全部",selectSort:"caseNum",keyword:"",professions:[],counties:[]}},components:{"user-list":ht},created:function(){var t=ft.GetUrlParameter().profession;t&&(this.selectProfession=decodeURIComponent(t)),$.get("/static/solution.json",function(t){this.professions=t.profession,this.counties=t.county}.bind(this))},methods:{SearchProfession:function(){var t={};"全部"!=this.selectProfession&&(t.profession=this.selectProfession),"全部"!=this.selectCounty&&(t.county=this.selectCounty),""!=this.keyword&&(t.keyword=this.keyword),t.sort=this.selectSort,this.$refs.userList.ClearList(),this.$refs.userList.LoadMoreList(t)},ResetCondition:function(){this.selectProfession="全部",this.selectCounty="全部",this.keyword="",this.selectSort="caseNum",this.SearchProfession()}}},Ct=(s(31),r(_t,vt,[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"category-title"},[this._v("\r\n\t\t\t\t專家列表\r\n\t\t\t\t"),e("div",{staticClass:"bottom-line"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mid-title"},[this._v("\r\n\t\t\t\t搜尋條件\r\n\t\t\t\t"),e("div",{staticClass:"bottom-line"})])}],!1,null,null,null));Ct.options.__file="src/vue/profession.vue";var gt=Ct.exports,wt=s(0);new Vue({el:"#careTips",components:{mainPage:d,topbar:f,careCalculator:P,loginPanel:N,caseEditor:G,caseList:l,caseView:at,userView:lt,profession:gt},data:{user:null,message:"",showMessage:!1},created:function(){window.addEventListener("resize",this.CloseMenu),$.get("/user/me",function(t){t.user&&(this.user=t.user,this.$refs.topbar&&this.$refs.topbar.SetUser(t.user),this.$refs.userView&&this.$refs.userView.SetUser(t.user),this.$refs.caseView&&this.$refs.caseView.SetUser(t.user),this.$refs.caseEditor&&this.$refs.caseEditor.SetUser(t.user));var e=wt.GetUrlParameter();e.message&&alert(decodeURIComponent(e.message)),wt.SetupAnchorScroll(-80)}.bind(this))},methods:{CloseMenu:function(){this.$refs.topbar&&this.$refs.topbar.CloseMenu()},ChangeUserPhoto:function(t){this.$refs.topbar&&this.$refs.topbar.ChangeUserPhoto(t),this.$refs.userView&&this.$refs.userView.ChangeUserPhoto(t)},ShowMessage:function(t){this.showMessage=!0,this.message=t,setTimeout(function(){this.showMessage=!1,this.message=""}.bind(this),3e3)}}})}]);
//# sourceMappingURL=main.js.map